(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Navigo",[],t):"object"==typeof exports?exports.Navigo=t():e.Navigo=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function i(e,t,n){this.root=null,this._routes=[],this._useHash=t,this._hash="undefined"==typeof n?"#":n,this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!t&&o(),this._onLocationChange=this._onLocationChange.bind(this),this._genericHooks=null,this._historyAPIUpdateMethod="pushState",e?this.root=t?e.replace(/\/$/,"/"+this._hash):e.replace(/\/$/,""):t&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}function s(e){return e instanceof RegExp?e:e.replace(/\/+$/,"").replace(/^\/+/,"^/")}function r(e,t){return 0===t.length?null:e?e.slice(1,e.length).reduce(function(e,n,o){return null===e&&(e={}),e[t[o]]=decodeURIComponent(n),e},null):null}function a(e){var t,n=[];return t=e instanceof RegExp?e:new RegExp(e.replace(i.PARAMETER_REGEXP,function(e,t,o){return n.push(o),i.REPLACE_VARIABLE_REGEXP}).replace(i.WILDCARD_REGEXP,i.REPLACE_WILDCARD)+i.FOLLOWED_BY_SLASH_REGEXP,i.MATCH_REGEXP_FLAGS),{regexp:t,paramNames:n}}function u(e){return e.replace(/\/$/,"").split("/").length}function h(e,t){return u(t)-u(e)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map(function(t){var n=a(s(t.route)),o=n.regexp,i=n.paramNames,u=e.replace(/^\/+/,"/").match(o),h=r(u,i);return!!u&&{match:u,route:t,params:h}}).filter(function(e){return e})}function d(e,t){return l(e,t)[0]||!1}function c(e,t){var n=t.map(function(t){return""===t.route||"*"===t.route?e:e.split(new RegExp(t.route+"($|/)"))[0]}),o=s(e);return n.length>1?n.reduce(function(e,t){return e.length>t.length&&(e=t),e},n[0]):1===n.length?n[0]:o}function f(){return!!("undefined"!=typeof window&&"onhashchange"in window)}function _(e){return e.split(/\?(.*)?$/).slice(1).join("")}function p(e,t,n){var i,s=e,r=function(e){return e.split(/\?(.*)?$/)[0]};return"undefined"==typeof n&&(n="#"),o()&&!t?s=r(e).split(n)[0]:(i=e.split(n),s=r(i.length>1?i[1]:i[0])),s}function v(e,t,n){return t&&"object"===("undefined"==typeof t?"undefined":g(t))?void(t.before?t.before(function(){var o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];o&&(e(),t.after&&t.after(n))},n):t.after&&(e(),t.after&&t.after(n))):void e()}function R(e,t,n){if(o()&&!t)return!1;if(!e.match(n))return!1;var i=e.split(n);return i.length<2||""===i[1]}Object.defineProperty(t,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.prototype={helpers:{match:d,root:c,clean:s,getOnlyURL:p},navigate:function(e,t){var n;return e=e||"",this._usePushState?(n=(t?"":this._getRoot()+"/")+e.replace(/^\/+/,"/"),n=n.replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",n),this.resolve()):"undefined"!=typeof window&&(e=e.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+e),this},on:function(){for(var e=this,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];if("function"==typeof n[0])this._defaultHandler={handler:n[0],hooks:n[1]};else if(n.length>=2)if("/"===n[0]){var i=n[1];"object"===g(n[1])&&(i=n[1].uses),this._defaultHandler={handler:i,hooks:n[2]}}else this._add(n[0],n[1],n[2]);else if("object"===g(n[0])){var s=Object.keys(n[0]).sort(h);s.forEach(function(t){e.on(t,n[0][t])})}return this},off:function(e){return null!==this._defaultHandler&&e===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&e===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce(function(t,n){return n.handler!==e&&t.push(n),t},[]),this},notFound:function(e,t){return this._notFoundHandler={handler:e,hooks:t},this},resolve:function(e){var t,o,i=this,s=(e||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(s=s.replace(new RegExp("^/"+this._hash),"/"));var r=_(e||this._cLoc()),a=p(s,this._useHash,this._hash);return!this._paused&&(this._lastRouteResolved&&a===this._lastRouteResolved.url&&r===this._lastRouteResolved.query?(this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1):(o=d(a,this._routes))?(this._callLeave(),this._lastRouteResolved={url:a,query:r,hooks:o.route.hooks,params:o.params,name:o.route.name},t=o.route.handler,v(function(){v(function(){o.route.route instanceof RegExp?t.apply(void 0,n(o.match.slice(1,o.match.length))):t(o.params,r)},o.route.hooks,o.params,i._genericHooks)},this._genericHooks,o.params),o):this._defaultHandler&&(""===a||"/"===a||a===this._hash||R(a,this._useHash,this._hash))?(v(function(){v(function(){i._callLeave(),i._lastRouteResolved={url:a,query:r,hooks:i._defaultHandler.hooks},i._defaultHandler.handler(r)},i._defaultHandler.hooks)},this._genericHooks),!0):(this._notFoundHandler&&v(function(){v(function(){i._callLeave(),i._lastRouteResolved={url:a,query:r,hooks:i._notFoundHandler.hooks},i._notFoundHandler.handler(r)},i._notFoundHandler.hooks)},this._genericHooks),!1))},destroy:function(){this._routes=[],this._destroyed=!0,clearTimeout(this._listeningInterval),"undefined"!=typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var e=this;"undefined"!=typeof document&&this._findLinks().forEach(function(t){t.hasListenerAttached||(t.addEventListener("click",function(n){var o=e.getLinkPath(t);e._destroyed||(n.preventDefault(),e.navigate(o.replace(/\/+$/,"").replace(/^\/+/,"/")))}),t.hasListenerAttached=!0)})},generate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._routes.reduce(function(n,o){var i;if(o.name===e){n=o.route;for(i in t)n=n.toString().replace(":"+i,t[i])}return n},"");return this._useHash?this._hash+n:n},link:function(e){return this._getRoot()+e},pause:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=e,e?this._historyAPIUpdateMethod="replaceState":this._historyAPIUpdateMethod="pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(e){return"undefined"==typeof e?this._historyAPIUpdateMethod:(this._historyAPIUpdateMethod=e,e)},disableIfAPINotAvailable:function(){o()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(e){return e.getAttribute("href")},hooks:function(e){this._genericHooks=e},_add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"string"==typeof e&&(e=encodeURI(e)),"object"===("undefined"==typeof t?"undefined":g(t))?this._routes.push({route:e,handler:t.uses,name:t.as,hooks:n||t.hooks}):this._routes.push({route:e,handler:t,hooks:n}),this._add},_getRoot:function(){return null!==this.root?this.root:(this.root=c(this._cLoc().split("?")[0],this._routes),this.root)},_listen:function(){var e=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if(f())window.addEventListener("hashchange",this._onLocationChange);else{var t=this._cLoc(),n=void 0,o=void 0;o=function(){n=e._cLoc(),t!==n&&(t=n,e.resolve()),e._listeningInterval=setTimeout(o,200)},o()}},_cLoc:function(){return"undefined"!=typeof window?"undefined"!=typeof window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:s(window.location.href):""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){this._lastRouteResolved&&this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.leave&&this._lastRouteResolved.hooks.leave(this._lastRouteResolved.params)}},i.PARAMETER_REGEXP=/([:*])(\w+)/g,i.WILDCARD_REGEXP=/\*/g,i.REPLACE_VARIABLE_REGEXP="([^/]+)",i.REPLACE_WILDCARD="(?:.*)",i.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)",i.MATCH_REGEXP_FLAGS="",t["default"]=i,e.exports=t["default"]}])});

},{}],2:[function(require,module,exports){
var variables = require('./modules/variables');

var init = require('./modules/login');

var loginByEmail = require('./modules/login');

var getAllTweets = require('./modules/tweets');

variables.router.on('/', init).on('/admin', loginByEmail).on('/admin-tweets', getAllTweets).resolve();

},{"./modules/login":3,"./modules/tweets":4,"./modules/variables":5}],3:[function(require,module,exports){
var variables = require('./variables');

module.exports = function init() {
  firebase.auth().getRedirectResult().then(function (result) {
    if (result.user !== null) {
      if (result.additionalUserInfo.isNewUser) {
        saveUser(result);
      } else {
        console.log('ya est√° en la base de datos');
      }
    }
  }).catch(function (error) {
    console.log('error', error); // Handle Errors here.

    var errorCode = error.code;
    var errorMessage = error.message; // The email of the user's account used.

    var email = error.email; // The firebase.auth.AuthCredential type that was used.

    var credential = error.credential; // ...
  });
  firebase.auth().onAuthStateChanged(function (user) {
    if (user) {
      if (user.uid === '8TCSD9FPoTh2RqDwq98cZQhMuIn2') {
        toggleHeader(user);
        return;
      }

      getMyTweets();
      toggleHeader(user);
      var template = "\n          <div class=\"main-container\">\n            <div class=\"main-container--div\">\n              <div class=\"main-textarea\">\n                <div id=\"tweet\" name=\"tweet\" placeholder=\"tu tweet...\" contentEditable=\"true\"></div>\n              </div>\n\n              <button id=\"send-tweet\">Enviar tweet</button>\n            </div>\n          </div>\n        ";
      main.insertAdjacentHTML('afterbegin', template);
      document.querySelector('#tweet').addEventListener('keyup', limitChars, false);
      document.querySelector('#send-tweet').addEventListener('click', sendTweet, false);
    } else {
      variables.router.navigate('/');
      document.querySelector('#header-welcome').style.display = 'none';
      document.querySelector('main').innerHTML = '';
      var _template = "\n        <div class=\"main-container\">\n          <div class=\"main-container--div\">\n            <button>login con twitter</button>\n            <label for=\"admin-checkbox\" ><input type=\"checkbox\" id=\"admin-checkbox\" /> \xBFEres admin?</label>\n          </div>\n        </div>\n        ";
      variables.main.insertAdjacentHTML('afterbegin', _template);
      document.querySelector('.main-container button').addEventListener('click', loginByTwitter, false);
      document.querySelector('#admin-checkbox').addEventListener('click', goToAdmin, false);
    }
  });
};

module.exports = function loginByTwitter() {
  var provider = new firebase.auth.TwitterAuthProvider();
  firebase.auth().signInWithRedirect(provider);
};

module.exports = function logOut() {
  main.innerHTML = '';
  firebase.auth().signOut();
  variables.router.navigate('/');
};

module.exports = function login() {
  var email = document.querySelector('#login-email').value;
  var password = document.querySelector('#login-password').value;
  firebase.auth().signInWithEmailAndPassword(email, password).then(function (data) {
    variables.router.navigate("/admin-tweets/");
  }).catch(function (error) {
    console.log(error);
  });
};

module.exports = function loginByEmail() {
  document.querySelector('header #header-welcome').style.display = 'none';
  document.querySelector('main').innerHTML = '';
  var template = '';
  template = "\n  <div id=\"ows-login\">\n    <input id=\"login-email\" type=\"text\" placeholder=\"correo electr\xF3nico\"/>\n    <input id=\"login-password\" type=\"password\" placeholder=\"contrase\xF1a\"/>\n    <a href=\"#\" id=\"login-login\">entrar</a>\n  </div>\n  ";
  document.querySelector('main').insertAdjacentHTML('afterbegin', template);
  document.querySelector('#login-login').addEventListener('click', module.exports.login, false);
};

},{"./variables":5}],4:[function(require,module,exports){
module.exports = function sendTweet() {
  var textArea = document.querySelector('#tweet');
  uid = firebase.auth().currentUser.uid;
  var user = users.child(uid);
  var tweets = user.child('tweets');
  var tweet = tweets.push();
  tweet.update({
    message: textArea.textContent,
    date: new Date().getTime(),
    state: ''
  });
  textArea.textContent = '';
  getMyTweets();
};

module.exports = function getMyTweets() {
  users.on('value', function (snapshot) {
    snapshot.forEach(function (user) {
      var myTweets = [];
      user.forEach(function (key) {
        if (key.key === 'tweets') {
          key.forEach(function (tweet) {
            myTweets.unshift({
              date: tweet.val().date,
              message: tweet.val().message,
              state: tweet.val().state
            });
          });
          renderMyTweets(myTweets);
        }
      });
    });
  });
};

module.exports = function editTweet(event) {
  console.log(event);
  var ref = firebase.database().ref("users/".concat(event.currentTarget.firstElementChild.id, "/tweets/"));
  ref.child(event.target.id).remove();
};

module.exports = function publishTweet(event) {
  var ref = firebase.database().ref("users/".concat(event.currentTarget.firstElementChild.id, "/tweets/").concat(event.target.id));
  ref.update({
    state: true
  });
  event.target.style.border = '1px solid green';
};

module.exports = function rejectTweet(event) {
  var ref = firebase.database().ref("users/".concat(event.currentTarget.firstElementChild.id, "/tweets/").concat(event.target.id));
  ref.update({
    state: false
  });
  event.target.style.border = '1px solid red';
};

module.exports = function getAllTweets() {
  document.querySelector('main').innerHTML = '';
  users.once('value', function (snapshot) {
    var allTweets = [];
    var tweetsByUser = {
      id: '',
      name: '',
      tweets: []
    };
    snapshot.forEach(function (user) {
      tweetsByUser.id = user.val().uid;
      tweetsByUser.name = user.val().username;
      user.forEach(function (key) {
        if (key.key === 'tweets') {
          key.forEach(function (tweet) {
            tweetsByUser.tweets.push({
              id: tweet.key,
              date: tweet.val().date,
              message: tweet.val().message,
              state: tweet.val().state
            });
          });
        }
      });
      allTweets.push(tweetsByUser);
    });
    renderAllTweets(allTweets);
  });
};

},{}],5:[function(require,module,exports){
var Navigo = require('navigo'); // module.exports.main =  document.querySelector('main');
// const rootDB = firebase.database().ref();
// module.exports.users = rootDB.child('users');


var root = null;
var useHash = true; // Defaults to: false

var hash = '#!'; // Defaults to: '#'

module.exports.router = new Navigo(root, useHash, hash);

},{"navigo":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL1VzZXJzL21hdS8ubnZtL3ZlcnNpb25zL25vZGUvdjEwLjEyLjAvbGliL25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvbmF2aWdvL2xpYi9uYXZpZ28ubWluLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvbW9kdWxlcy9sb2dpbi5qcyIsInNyYy9qcy9tb2R1bGVzL3R3ZWV0cy5qcyIsInNyYy9qcy9tb2R1bGVzL3ZhcmlhYmxlcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7O0FDQUEsSUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLHFCQUFELENBQXpCOztBQUNBLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxpQkFBRCxDQUFwQjs7QUFDQSxJQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsaUJBQUQsQ0FBNUI7O0FBQ0EsSUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLGtCQUFELENBQTVCOztBQUVBLFNBQVMsQ0FBQyxNQUFWLENBQ0csRUFESCxDQUNNLEdBRE4sRUFDVyxJQURYLEVBRUcsRUFGSCxDQUVNLFFBRk4sRUFFZ0IsWUFGaEIsRUFHRyxFQUhILENBR00sZUFITixFQUd1QixZQUh2QixFQUlHLE9BSkg7OztBQ05BLElBQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxhQUFELENBQXpCOztBQUVBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFNBQVMsSUFBVCxHQUFnQjtBQUMvQixFQUFBLFFBQVEsQ0FBQyxJQUFULEdBQ0csaUJBREgsR0FFSyxJQUZMLENBRVcsVUFBQSxNQUFNLEVBQUk7QUFFZixRQUFJLE1BQU0sQ0FBQyxJQUFQLEtBQWdCLElBQXBCLEVBQTBCO0FBQ3hCLFVBQUksTUFBTSxDQUFDLGtCQUFQLENBQTBCLFNBQTlCLEVBQXdDO0FBQ3RDLFFBQUEsUUFBUSxDQUFDLE1BQUQsQ0FBUjtBQUNELE9BRkQsTUFFTztBQUNMLFFBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSw2QkFBWjtBQUNEO0FBQ0Y7QUFDRixHQVhMLEVBV08sS0FYUCxDQVdjLFVBQUEsS0FBSyxFQUFJO0FBQ2pCLElBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxPQUFaLEVBQXFCLEtBQXJCLEVBRGlCLENBRWpCOztBQUNBLFFBQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxJQUF4QjtBQUNBLFFBQU0sWUFBWSxHQUFHLEtBQUssQ0FBQyxPQUEzQixDQUppQixDQUtqQjs7QUFDQSxRQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBcEIsQ0FOaUIsQ0FPakI7O0FBQ0EsUUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLFVBQXpCLENBUmlCLENBU2pCO0FBQ0QsR0FyQkw7QUF1QkEsRUFBQSxRQUFRLENBQUMsSUFBVCxHQUNHLGtCQURILENBQ3VCLFVBQUEsSUFBSSxFQUFJO0FBQzNCLFFBQUksSUFBSixFQUFVO0FBQ1IsVUFBSSxJQUFJLENBQUMsR0FBTCxLQUFhLDhCQUFqQixFQUFpRDtBQUMvQyxRQUFBLFlBQVksQ0FBQyxJQUFELENBQVo7QUFDQTtBQUNEOztBQUVELE1BQUEsV0FBVztBQUNYLE1BQUEsWUFBWSxDQUFDLElBQUQsQ0FBWjtBQUVBLFVBQU0sUUFBUSxrWUFBZDtBQWFBLE1BQUEsSUFBSSxDQUFDLGtCQUFMLENBQXdCLFlBQXhCLEVBQXNDLFFBQXRDO0FBQ0EsTUFBQSxRQUFRLENBQUMsYUFBVCxDQUF1QixRQUF2QixFQUNHLGdCQURILENBQ29CLE9BRHBCLEVBQzZCLFVBRDdCLEVBQ3lDLEtBRHpDO0FBR0EsTUFBQSxRQUFRLENBQUMsYUFBVCxDQUF1QixhQUF2QixFQUNHLGdCQURILENBQ29CLE9BRHBCLEVBQzZCLFNBRDdCLEVBQ3dDLEtBRHhDO0FBSUQsS0E5QkQsTUE4Qk87QUFDTCxNQUFBLFNBQVMsQ0FBQyxNQUFWLENBQWlCLFFBQWpCLENBQTBCLEdBQTFCO0FBQ0EsTUFBQSxRQUFRLENBQUMsYUFBVCxDQUF1QixpQkFBdkIsRUFBMEMsS0FBMUMsQ0FBZ0QsT0FBaEQsR0FBMEQsTUFBMUQ7QUFDQSxNQUFBLFFBQVEsQ0FBQyxhQUFULENBQXVCLE1BQXZCLEVBQStCLFNBQS9CLEdBQTJDLEVBQTNDO0FBQ0EsVUFBTSxTQUFRLDhTQUFkO0FBVUEsTUFBQSxTQUFTLENBQUMsSUFBVixDQUFlLGtCQUFmLENBQWtDLFlBQWxDLEVBQWdELFNBQWhEO0FBQ0EsTUFBQSxRQUFRLENBQUMsYUFBVCxDQUF1Qix3QkFBdkIsRUFDRyxnQkFESCxDQUNvQixPQURwQixFQUM2QixjQUQ3QixFQUM2QyxLQUQ3QztBQUVBLE1BQUEsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsaUJBQXZCLEVBQ0csZ0JBREgsQ0FDb0IsT0FEcEIsRUFDNkIsU0FEN0IsRUFDd0MsS0FEeEM7QUFFRDtBQUNGLEdBcERIO0FBcURELENBN0VEOztBQStFQSxNQUFNLENBQUMsT0FBUCxHQUFpQixTQUFTLGNBQVQsR0FBMkI7QUFDMUMsTUFBTSxRQUFRLEdBQUcsSUFBSSxRQUFRLENBQUMsSUFBVCxDQUFjLG1CQUFsQixFQUFqQjtBQUVBLEVBQUEsUUFBUSxDQUFDLElBQVQsR0FDRyxrQkFESCxDQUNzQixRQUR0QjtBQUVELENBTEQ7O0FBT0EsTUFBTSxDQUFDLE9BQVAsR0FBaUIsU0FBUyxNQUFULEdBQW1CO0FBQ2xDLEVBQUEsSUFBSSxDQUFDLFNBQUwsR0FBaUIsRUFBakI7QUFDQSxFQUFBLFFBQVEsQ0FBQyxJQUFULEdBQWdCLE9BQWhCO0FBQ0EsRUFBQSxTQUFTLENBQUMsTUFBVixDQUFpQixRQUFqQixDQUEwQixHQUExQjtBQUNELENBSkQ7O0FBTUEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsU0FBUyxLQUFULEdBQWtCO0FBQ2pDLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLGNBQXZCLEVBQXVDLEtBQXJEO0FBQ0EsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsaUJBQXZCLEVBQTBDLEtBQTNEO0FBRUEsRUFBQSxRQUFRLENBQUMsSUFBVCxHQUFnQiwwQkFBaEIsQ0FBMkMsS0FBM0MsRUFBa0QsUUFBbEQsRUFDRyxJQURILENBQ1EsVUFBQSxJQUFJLEVBQUk7QUFDWixJQUFBLFNBQVMsQ0FBQyxNQUFWLENBQWlCLFFBQWpCO0FBQ0QsR0FISCxFQUlHLEtBSkgsQ0FJUyxVQUFBLEtBQUssRUFBSTtBQUNkLElBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxLQUFaO0FBQ0QsR0FOSDtBQU9ELENBWEQ7O0FBYUEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsU0FBUyxZQUFULEdBQXdCO0FBQ3ZDLEVBQUEsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsd0JBQXZCLEVBQWlELEtBQWpELENBQXVELE9BQXZELEdBQWlFLE1BQWpFO0FBQ0EsRUFBQSxRQUFRLENBQUMsYUFBVCxDQUF1QixNQUF2QixFQUErQixTQUEvQixHQUEyQyxFQUEzQztBQUNBLE1BQUksUUFBUSxHQUFHLEVBQWY7QUFDQSxFQUFBLFFBQVEsdVFBQVI7QUFTQSxFQUFBLFFBQVEsQ0FBQyxhQUFULENBQXVCLE1BQXZCLEVBQStCLGtCQUEvQixDQUFrRCxZQUFsRCxFQUFnRSxRQUFoRTtBQUNBLEVBQUEsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsY0FBdkIsRUFBdUMsZ0JBQXZDLENBQXdELE9BQXhELEVBQWlFLE1BQU0sQ0FBQyxPQUFQLENBQWUsS0FBaEYsRUFBdUYsS0FBdkY7QUFDRCxDQWZEOzs7QUMzR0EsTUFBTSxDQUFDLE9BQVAsR0FBaUIsU0FBUyxTQUFULEdBQXNCO0FBQ3JDLE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFFBQXZCLENBQWpCO0FBRUEsRUFBQSxHQUFHLEdBQUcsUUFBUSxDQUFDLElBQVQsR0FBZ0IsV0FBaEIsQ0FBNEIsR0FBbEM7QUFDQSxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsS0FBTixDQUFZLEdBQVosQ0FBYjtBQUNBLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFMLENBQVcsUUFBWCxDQUFmO0FBQ0EsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQVAsRUFBZDtBQUVBLEVBQUEsS0FBSyxDQUFDLE1BQU4sQ0FBYTtBQUNYLElBQUEsT0FBTyxFQUFFLFFBQVEsQ0FBQyxXQURQO0FBRVgsSUFBQSxJQUFJLEVBQUUsSUFBSSxJQUFKLEdBQVcsT0FBWCxFQUZLO0FBR1gsSUFBQSxLQUFLLEVBQUU7QUFISSxHQUFiO0FBTUEsRUFBQSxRQUFRLENBQUMsV0FBVCxHQUF1QixFQUF2QjtBQUVBLEVBQUEsV0FBVztBQUNaLENBakJEOztBQW1CQSxNQUFNLENBQUMsT0FBUCxHQUFpQixTQUFTLFdBQVQsR0FBd0I7QUFFdkMsRUFBQSxLQUFLLENBQUMsRUFBTixDQUFTLE9BQVQsRUFBa0IsVUFBQyxRQUFELEVBQWM7QUFFOUIsSUFBQSxRQUFRLENBQUMsT0FBVCxDQUFpQixVQUFBLElBQUksRUFBSTtBQUN2QixVQUFJLFFBQVEsR0FBRyxFQUFmO0FBQ0EsTUFBQSxJQUFJLENBQUMsT0FBTCxDQUFhLFVBQUEsR0FBRyxFQUFJO0FBRWxCLFlBQUksR0FBRyxDQUFDLEdBQUosS0FBWSxRQUFoQixFQUEwQjtBQUV4QixVQUFBLEdBQUcsQ0FBQyxPQUFKLENBQWEsVUFBQSxLQUFLLEVBQUk7QUFFcEIsWUFBQSxRQUFRLENBQUMsT0FBVCxDQUNFO0FBQ0UsY0FBQSxJQUFJLEVBQUUsS0FBSyxDQUFDLEdBQU4sR0FBWSxJQURwQjtBQUVFLGNBQUEsT0FBTyxFQUFFLEtBQUssQ0FBQyxHQUFOLEdBQVksT0FGdkI7QUFHRSxjQUFBLEtBQUssRUFBRSxLQUFLLENBQUMsR0FBTixHQUFZO0FBSHJCLGFBREY7QUFPRCxXQVREO0FBV0EsVUFBQSxjQUFjLENBQUMsUUFBRCxDQUFkO0FBQ0Q7QUFFRixPQWxCRDtBQW9CRCxLQXRCRDtBQXdCRCxHQTFCRDtBQTJCRCxDQTdCRDs7QUErQkEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsU0FBUyxTQUFULENBQW1CLEtBQW5CLEVBQTBCO0FBQ3pDLEVBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxLQUFaO0FBQ0EsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLFFBQVQsR0FBb0IsR0FBcEIsaUJBQWlDLEtBQUssQ0FBQyxhQUFOLENBQW9CLGlCQUFwQixDQUFzQyxFQUF2RSxjQUFaO0FBQ0EsRUFBQSxHQUFHLENBQUMsS0FBSixDQUFVLEtBQUssQ0FBQyxNQUFOLENBQWEsRUFBdkIsRUFBMkIsTUFBM0I7QUFFRCxDQUxEOztBQU9BLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFNBQVMsWUFBVCxDQUFzQixLQUF0QixFQUE2QjtBQUM1QyxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsUUFBVCxHQUFvQixHQUFwQixpQkFBaUMsS0FBSyxDQUFDLGFBQU4sQ0FBb0IsaUJBQXBCLENBQXNDLEVBQXZFLHFCQUFvRixLQUFLLENBQUMsTUFBTixDQUFhLEVBQWpHLEVBQVo7QUFDQSxFQUFBLEdBQUcsQ0FBQyxNQUFKLENBQVc7QUFBQyxJQUFBLEtBQUssRUFBRTtBQUFSLEdBQVg7QUFDQSxFQUFBLEtBQUssQ0FBQyxNQUFOLENBQWEsS0FBYixDQUFtQixNQUFuQixHQUE0QixpQkFBNUI7QUFDRCxDQUpEOztBQU1BLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFNBQVMsV0FBVCxDQUFxQixLQUFyQixFQUE0QjtBQUMzQyxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsUUFBVCxHQUFvQixHQUFwQixpQkFBaUMsS0FBSyxDQUFDLGFBQU4sQ0FBb0IsaUJBQXBCLENBQXNDLEVBQXZFLHFCQUFvRixLQUFLLENBQUMsTUFBTixDQUFhLEVBQWpHLEVBQVo7QUFDQSxFQUFBLEdBQUcsQ0FBQyxNQUFKLENBQVc7QUFBQyxJQUFBLEtBQUssRUFBRTtBQUFSLEdBQVg7QUFDQSxFQUFBLEtBQUssQ0FBQyxNQUFOLENBQWEsS0FBYixDQUFtQixNQUFuQixHQUE0QixlQUE1QjtBQUNELENBSkQ7O0FBTUEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsU0FBUyxZQUFULEdBQXlCO0FBQ3hDLEVBQUEsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0IsU0FBL0IsR0FBMkMsRUFBM0M7QUFDQSxFQUFBLEtBQUssQ0FBQyxJQUFOLENBQVcsT0FBWCxFQUFvQixVQUFDLFFBQUQsRUFBYztBQUVoQyxRQUFJLFNBQVMsR0FBRyxFQUFoQjtBQUNBLFFBQUksWUFBWSxHQUFHO0FBQ2pCLE1BQUEsRUFBRSxFQUFFLEVBRGE7QUFFakIsTUFBQSxJQUFJLEVBQUUsRUFGVztBQUdqQixNQUFBLE1BQU0sRUFBRTtBQUhTLEtBQW5CO0FBTUEsSUFBQSxRQUFRLENBQUMsT0FBVCxDQUFpQixVQUFBLElBQUksRUFBSTtBQUN2QixNQUFBLFlBQVksQ0FBQyxFQUFiLEdBQWtCLElBQUksQ0FBQyxHQUFMLEdBQVcsR0FBN0I7QUFDQSxNQUFBLFlBQVksQ0FBQyxJQUFiLEdBQW9CLElBQUksQ0FBQyxHQUFMLEdBQVcsUUFBL0I7QUFFQSxNQUFBLElBQUksQ0FBQyxPQUFMLENBQWEsVUFBQSxHQUFHLEVBQUk7QUFDbEIsWUFBSSxHQUFHLENBQUMsR0FBSixLQUFZLFFBQWhCLEVBQTBCO0FBRXhCLFVBQUEsR0FBRyxDQUFDLE9BQUosQ0FBYSxVQUFBLEtBQUssRUFBSTtBQUNwQixZQUFBLFlBQVksQ0FBQyxNQUFiLENBQW9CLElBQXBCLENBQ0U7QUFDRSxjQUFBLEVBQUUsRUFBRSxLQUFLLENBQUMsR0FEWjtBQUVFLGNBQUEsSUFBSSxFQUFFLEtBQUssQ0FBQyxHQUFOLEdBQVksSUFGcEI7QUFHRSxjQUFBLE9BQU8sRUFBRSxLQUFLLENBQUMsR0FBTixHQUFZLE9BSHZCO0FBSUUsY0FBQSxLQUFLLEVBQUUsS0FBSyxDQUFDLEdBQU4sR0FBWTtBQUpyQixhQURGO0FBUUQsV0FURDtBQVVEO0FBRUYsT0FmRDtBQWdCQSxNQUFBLFNBQVMsQ0FBQyxJQUFWLENBQWUsWUFBZjtBQUVELEtBdEJEO0FBdUJBLElBQUEsZUFBZSxDQUFDLFNBQUQsQ0FBZjtBQUNELEdBakNEO0FBa0NELENBcENEOzs7QUNyRUEsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQUQsQ0FBdEIsQyxDQUVBO0FBRUE7QUFDQTs7O0FBRUEsSUFBTSxJQUFJLEdBQUcsSUFBYjtBQUNBLElBQU0sT0FBTyxHQUFHLElBQWhCLEMsQ0FBc0I7O0FBQ3RCLElBQU0sSUFBSSxHQUFHLElBQWIsQyxDQUFtQjs7QUFDbkIsTUFBTSxDQUFDLE9BQVAsQ0FBZSxNQUFmLEdBQXdCLElBQUksTUFBSixDQUFXLElBQVgsRUFBaUIsT0FBakIsRUFBMEIsSUFBMUIsQ0FBeEIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIhZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcIk5hdmlnb1wiLFtdLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuTmF2aWdvPXQoKTplLk5hdmlnbz10KCl9KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChvKXtpZihuW29dKXJldHVybiBuW29dLmV4cG9ydHM7dmFyIGk9bltvXT17ZXhwb3J0czp7fSxpZDpvLGxvYWRlZDohMX07cmV0dXJuIGVbb10uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsdCksaS5sb2FkZWQ9ITAsaS5leHBvcnRzfXZhciBuPXt9O3JldHVybiB0Lm09ZSx0LmM9bix0LnA9XCJcIix0KDApfShbZnVuY3Rpb24oZSx0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgdD0wLG49QXJyYXkoZS5sZW5ndGgpO3Q8ZS5sZW5ndGg7dCsrKW5bdF09ZVt0XTtyZXR1cm4gbn1yZXR1cm4gQXJyYXkuZnJvbShlKX1mdW5jdGlvbiBvKCl7cmV0dXJuIShcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93fHwhd2luZG93Lmhpc3Rvcnl8fCF3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUpfWZ1bmN0aW9uIGkoZSx0LG4pe3RoaXMucm9vdD1udWxsLHRoaXMuX3JvdXRlcz1bXSx0aGlzLl91c2VIYXNoPXQsdGhpcy5faGFzaD1cInVuZGVmaW5lZFwiPT10eXBlb2Ygbj9cIiNcIjpuLHRoaXMuX3BhdXNlZD0hMSx0aGlzLl9kZXN0cm95ZWQ9ITEsdGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQ9bnVsbCx0aGlzLl9ub3RGb3VuZEhhbmRsZXI9bnVsbCx0aGlzLl9kZWZhdWx0SGFuZGxlcj1udWxsLHRoaXMuX3VzZVB1c2hTdGF0ZT0hdCYmbygpLHRoaXMuX29uTG9jYXRpb25DaGFuZ2U9dGhpcy5fb25Mb2NhdGlvbkNoYW5nZS5iaW5kKHRoaXMpLHRoaXMuX2dlbmVyaWNIb29rcz1udWxsLHRoaXMuX2hpc3RvcnlBUElVcGRhdGVNZXRob2Q9XCJwdXNoU3RhdGVcIixlP3RoaXMucm9vdD10P2UucmVwbGFjZSgvXFwvJC8sXCIvXCIrdGhpcy5faGFzaCk6ZS5yZXBsYWNlKC9cXC8kLyxcIlwiKTp0JiYodGhpcy5yb290PXRoaXMuX2NMb2MoKS5zcGxpdCh0aGlzLl9oYXNoKVswXS5yZXBsYWNlKC9cXC8kLyxcIi9cIit0aGlzLl9oYXNoKSksdGhpcy5fbGlzdGVuKCksdGhpcy51cGRhdGVQYWdlTGlua3MoKX1mdW5jdGlvbiBzKGUpe3JldHVybiBlIGluc3RhbmNlb2YgUmVnRXhwP2U6ZS5yZXBsYWNlKC9cXC8rJC8sXCJcIikucmVwbGFjZSgvXlxcLysvLFwiXi9cIil9ZnVuY3Rpb24gcihlLHQpe3JldHVybiAwPT09dC5sZW5ndGg/bnVsbDplP2Uuc2xpY2UoMSxlLmxlbmd0aCkucmVkdWNlKGZ1bmN0aW9uKGUsbixvKXtyZXR1cm4gbnVsbD09PWUmJihlPXt9KSxlW3Rbb11dPWRlY29kZVVSSUNvbXBvbmVudChuKSxlfSxudWxsKTpudWxsfWZ1bmN0aW9uIGEoZSl7dmFyIHQsbj1bXTtyZXR1cm4gdD1lIGluc3RhbmNlb2YgUmVnRXhwP2U6bmV3IFJlZ0V4cChlLnJlcGxhY2UoaS5QQVJBTUVURVJfUkVHRVhQLGZ1bmN0aW9uKGUsdCxvKXtyZXR1cm4gbi5wdXNoKG8pLGkuUkVQTEFDRV9WQVJJQUJMRV9SRUdFWFB9KS5yZXBsYWNlKGkuV0lMRENBUkRfUkVHRVhQLGkuUkVQTEFDRV9XSUxEQ0FSRCkraS5GT0xMT1dFRF9CWV9TTEFTSF9SRUdFWFAsaS5NQVRDSF9SRUdFWFBfRkxBR1MpLHtyZWdleHA6dCxwYXJhbU5hbWVzOm59fWZ1bmN0aW9uIHUoZSl7cmV0dXJuIGUucmVwbGFjZSgvXFwvJC8sXCJcIikuc3BsaXQoXCIvXCIpLmxlbmd0aH1mdW5jdGlvbiBoKGUsdCl7cmV0dXJuIHUodCktdShlKX1mdW5jdGlvbiBsKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpbXTtyZXR1cm4gdC5tYXAoZnVuY3Rpb24odCl7dmFyIG49YShzKHQucm91dGUpKSxvPW4ucmVnZXhwLGk9bi5wYXJhbU5hbWVzLHU9ZS5yZXBsYWNlKC9eXFwvKy8sXCIvXCIpLm1hdGNoKG8pLGg9cih1LGkpO3JldHVybiEhdSYme21hdGNoOnUscm91dGU6dCxwYXJhbXM6aH19KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KX1mdW5jdGlvbiBkKGUsdCl7cmV0dXJuIGwoZSx0KVswXXx8ITF9ZnVuY3Rpb24gYyhlLHQpe3ZhciBuPXQubWFwKGZ1bmN0aW9uKHQpe3JldHVyblwiXCI9PT10LnJvdXRlfHxcIipcIj09PXQucm91dGU/ZTplLnNwbGl0KG5ldyBSZWdFeHAodC5yb3V0ZStcIigkfC8pXCIpKVswXX0pLG89cyhlKTtyZXR1cm4gbi5sZW5ndGg+MT9uLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiBlLmxlbmd0aD50Lmxlbmd0aCYmKGU9dCksZX0sblswXSk6MT09PW4ubGVuZ3RoP25bMF06b31mdW5jdGlvbiBmKCl7cmV0dXJuISEoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmXCJvbmhhc2hjaGFuZ2VcImluIHdpbmRvdyl9ZnVuY3Rpb24gXyhlKXtyZXR1cm4gZS5zcGxpdCgvXFw/KC4qKT8kLykuc2xpY2UoMSkuam9pbihcIlwiKX1mdW5jdGlvbiBwKGUsdCxuKXt2YXIgaSxzPWUscj1mdW5jdGlvbihlKXtyZXR1cm4gZS5zcGxpdCgvXFw/KC4qKT8kLylbMF19O3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBuJiYobj1cIiNcIiksbygpJiYhdD9zPXIoZSkuc3BsaXQobilbMF06KGk9ZS5zcGxpdChuKSxzPXIoaS5sZW5ndGg+MT9pWzFdOmlbMF0pKSxzfWZ1bmN0aW9uIHYoZSx0LG4pe3JldHVybiB0JiZcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0P1widW5kZWZpbmVkXCI6Zyh0KSk/dm9pZCh0LmJlZm9yZT90LmJlZm9yZShmdW5jdGlvbigpe3ZhciBvPSEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF07byYmKGUoKSx0LmFmdGVyJiZ0LmFmdGVyKG4pKX0sbik6dC5hZnRlciYmKGUoKSx0LmFmdGVyJiZ0LmFmdGVyKG4pKSk6dm9pZCBlKCl9ZnVuY3Rpb24gUihlLHQsbil7aWYobygpJiYhdClyZXR1cm4hMTtpZighZS5tYXRjaChuKSlyZXR1cm4hMTt2YXIgaT1lLnNwbGl0KG4pO3JldHVybiBpLmxlbmd0aDwyfHxcIlwiPT09aVsxXX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgZz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfTtpLnByb3RvdHlwZT17aGVscGVyczp7bWF0Y2g6ZCxyb290OmMsY2xlYW46cyxnZXRPbmx5VVJMOnB9LG5hdmlnYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuIGU9ZXx8XCJcIix0aGlzLl91c2VQdXNoU3RhdGU/KG49KHQ/XCJcIjp0aGlzLl9nZXRSb290KCkrXCIvXCIpK2UucmVwbGFjZSgvXlxcLysvLFwiL1wiKSxuPW4ucmVwbGFjZSgvKFteOl0pKFxcL3syLH0pL2csXCIkMS9cIiksaGlzdG9yeVt0aGlzLl9oaXN0b3J5QVBJVXBkYXRlTWV0aG9kXSh7fSxcIlwiLG4pLHRoaXMucmVzb2x2ZSgpKTpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYoZT1lLnJlcGxhY2UobmV3IFJlZ0V4cChcIl5cIit0aGlzLl9oYXNoKSxcIlwiKSx3aW5kb3cubG9jYXRpb24uaHJlZj13aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jJC8sXCJcIikucmVwbGFjZShuZXcgUmVnRXhwKHRoaXMuX2hhc2grXCIuKiRcIiksXCJcIikrdGhpcy5faGFzaCtlKSx0aGlzfSxvbjpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aCxuPUFycmF5KHQpLG89MDtvPHQ7bysrKW5bb109YXJndW1lbnRzW29dO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG5bMF0pdGhpcy5fZGVmYXVsdEhhbmRsZXI9e2hhbmRsZXI6blswXSxob29rczpuWzFdfTtlbHNlIGlmKG4ubGVuZ3RoPj0yKWlmKFwiL1wiPT09blswXSl7dmFyIGk9blsxXTtcIm9iamVjdFwiPT09ZyhuWzFdKSYmKGk9blsxXS51c2VzKSx0aGlzLl9kZWZhdWx0SGFuZGxlcj17aGFuZGxlcjppLGhvb2tzOm5bMl19fWVsc2UgdGhpcy5fYWRkKG5bMF0sblsxXSxuWzJdKTtlbHNlIGlmKFwib2JqZWN0XCI9PT1nKG5bMF0pKXt2YXIgcz1PYmplY3Qua2V5cyhuWzBdKS5zb3J0KGgpO3MuZm9yRWFjaChmdW5jdGlvbih0KXtlLm9uKHQsblswXVt0XSl9KX1yZXR1cm4gdGhpc30sb2ZmOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT09dGhpcy5fZGVmYXVsdEhhbmRsZXImJmU9PT10aGlzLl9kZWZhdWx0SGFuZGxlci5oYW5kbGVyP3RoaXMuX2RlZmF1bHRIYW5kbGVyPW51bGw6bnVsbCE9PXRoaXMuX25vdEZvdW5kSGFuZGxlciYmZT09PXRoaXMuX25vdEZvdW5kSGFuZGxlci5oYW5kbGVyJiYodGhpcy5fbm90Rm91bmRIYW5kbGVyPW51bGwpLHRoaXMuX3JvdXRlcz10aGlzLl9yb3V0ZXMucmVkdWNlKGZ1bmN0aW9uKHQsbil7cmV0dXJuIG4uaGFuZGxlciE9PWUmJnQucHVzaChuKSx0fSxbXSksdGhpc30sbm90Rm91bmQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fbm90Rm91bmRIYW5kbGVyPXtoYW5kbGVyOmUsaG9va3M6dH0sdGhpc30scmVzb2x2ZTpmdW5jdGlvbihlKXt2YXIgdCxvLGk9dGhpcyxzPShlfHx0aGlzLl9jTG9jKCkpLnJlcGxhY2UodGhpcy5fZ2V0Um9vdCgpLFwiXCIpO3RoaXMuX3VzZUhhc2gmJihzPXMucmVwbGFjZShuZXcgUmVnRXhwKFwiXi9cIit0aGlzLl9oYXNoKSxcIi9cIikpO3ZhciByPV8oZXx8dGhpcy5fY0xvYygpKSxhPXAocyx0aGlzLl91c2VIYXNoLHRoaXMuX2hhc2gpO3JldHVybiF0aGlzLl9wYXVzZWQmJih0aGlzLl9sYXN0Um91dGVSZXNvbHZlZCYmYT09PXRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkLnVybCYmcj09PXRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkLnF1ZXJ5Pyh0aGlzLl9sYXN0Um91dGVSZXNvbHZlZC5ob29rcyYmdGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQuaG9va3MuYWxyZWFkeSYmdGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQuaG9va3MuYWxyZWFkeSh0aGlzLl9sYXN0Um91dGVSZXNvbHZlZC5wYXJhbXMpLCExKToobz1kKGEsdGhpcy5fcm91dGVzKSk/KHRoaXMuX2NhbGxMZWF2ZSgpLHRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkPXt1cmw6YSxxdWVyeTpyLGhvb2tzOm8ucm91dGUuaG9va3MscGFyYW1zOm8ucGFyYW1zLG5hbWU6by5yb3V0ZS5uYW1lfSx0PW8ucm91dGUuaGFuZGxlcix2KGZ1bmN0aW9uKCl7dihmdW5jdGlvbigpe28ucm91dGUucm91dGUgaW5zdGFuY2VvZiBSZWdFeHA/dC5hcHBseSh2b2lkIDAsbihvLm1hdGNoLnNsaWNlKDEsby5tYXRjaC5sZW5ndGgpKSk6dChvLnBhcmFtcyxyKX0sby5yb3V0ZS5ob29rcyxvLnBhcmFtcyxpLl9nZW5lcmljSG9va3MpfSx0aGlzLl9nZW5lcmljSG9va3Msby5wYXJhbXMpLG8pOnRoaXMuX2RlZmF1bHRIYW5kbGVyJiYoXCJcIj09PWF8fFwiL1wiPT09YXx8YT09PXRoaXMuX2hhc2h8fFIoYSx0aGlzLl91c2VIYXNoLHRoaXMuX2hhc2gpKT8odihmdW5jdGlvbigpe3YoZnVuY3Rpb24oKXtpLl9jYWxsTGVhdmUoKSxpLl9sYXN0Um91dGVSZXNvbHZlZD17dXJsOmEscXVlcnk6cixob29rczppLl9kZWZhdWx0SGFuZGxlci5ob29rc30saS5fZGVmYXVsdEhhbmRsZXIuaGFuZGxlcihyKX0saS5fZGVmYXVsdEhhbmRsZXIuaG9va3MpfSx0aGlzLl9nZW5lcmljSG9va3MpLCEwKToodGhpcy5fbm90Rm91bmRIYW5kbGVyJiZ2KGZ1bmN0aW9uKCl7dihmdW5jdGlvbigpe2kuX2NhbGxMZWF2ZSgpLGkuX2xhc3RSb3V0ZVJlc29sdmVkPXt1cmw6YSxxdWVyeTpyLGhvb2tzOmkuX25vdEZvdW5kSGFuZGxlci5ob29rc30saS5fbm90Rm91bmRIYW5kbGVyLmhhbmRsZXIocil9LGkuX25vdEZvdW5kSGFuZGxlci5ob29rcyl9LHRoaXMuX2dlbmVyaWNIb29rcyksITEpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3JvdXRlcz1bXSx0aGlzLl9kZXN0cm95ZWQ9ITAsY2xlYXJUaW1lb3V0KHRoaXMuX2xpc3RlbmluZ0ludGVydmFsKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLHRoaXMuX29uTG9jYXRpb25DaGFuZ2UpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLHRoaXMuX29uTG9jYXRpb25DaGFuZ2UpKX0sdXBkYXRlUGFnZUxpbmtzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJnRoaXMuX2ZpbmRMaW5rcygpLmZvckVhY2goZnVuY3Rpb24odCl7dC5oYXNMaXN0ZW5lckF0dGFjaGVkfHwodC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbihuKXt2YXIgbz1lLmdldExpbmtQYXRoKHQpO2UuX2Rlc3Ryb3llZHx8KG4ucHJldmVudERlZmF1bHQoKSxlLm5hdmlnYXRlKG8ucmVwbGFjZSgvXFwvKyQvLFwiXCIpLnJlcGxhY2UoL15cXC8rLyxcIi9cIikpKX0pLHQuaGFzTGlzdGVuZXJBdHRhY2hlZD0hMCl9KX0sZ2VuZXJhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG49dGhpcy5fcm91dGVzLnJlZHVjZShmdW5jdGlvbihuLG8pe3ZhciBpO2lmKG8ubmFtZT09PWUpe249by5yb3V0ZTtmb3IoaSBpbiB0KW49bi50b1N0cmluZygpLnJlcGxhY2UoXCI6XCIraSx0W2ldKX1yZXR1cm4gbn0sXCJcIik7cmV0dXJuIHRoaXMuX3VzZUhhc2g/dGhpcy5faGFzaCtuOm59LGxpbms6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2dldFJvb3QoKStlfSxwYXVzZTpmdW5jdGlvbigpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF07dGhpcy5fcGF1c2VkPWUsZT90aGlzLl9oaXN0b3J5QVBJVXBkYXRlTWV0aG9kPVwicmVwbGFjZVN0YXRlXCI6dGhpcy5faGlzdG9yeUFQSVVwZGF0ZU1ldGhvZD1cInB1c2hTdGF0ZVwifSxyZXN1bWU6ZnVuY3Rpb24oKXt0aGlzLnBhdXNlKCExKX0saGlzdG9yeUFQSVVwZGF0ZU1ldGhvZDpmdW5jdGlvbihlKXtyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgZT90aGlzLl9oaXN0b3J5QVBJVXBkYXRlTWV0aG9kOih0aGlzLl9oaXN0b3J5QVBJVXBkYXRlTWV0aG9kPWUsZSl9LGRpc2FibGVJZkFQSU5vdEF2YWlsYWJsZTpmdW5jdGlvbigpe28oKXx8dGhpcy5kZXN0cm95KCl9LGxhc3RSb3V0ZVJlc29sdmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkfSxnZXRMaW5rUGF0aDpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfSxob29rczpmdW5jdGlvbihlKXt0aGlzLl9nZW5lcmljSG9va3M9ZX0sX2FkZDpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06bnVsbCxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpudWxsO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT1lbmNvZGVVUkkoZSkpLFwib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIHQ/XCJ1bmRlZmluZWRcIjpnKHQpKT90aGlzLl9yb3V0ZXMucHVzaCh7cm91dGU6ZSxoYW5kbGVyOnQudXNlcyxuYW1lOnQuYXMsaG9va3M6bnx8dC5ob29rc30pOnRoaXMuX3JvdXRlcy5wdXNoKHtyb3V0ZTplLGhhbmRsZXI6dCxob29rczpufSksdGhpcy5fYWRkfSxfZ2V0Um9vdDpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5yb290P3RoaXMucm9vdDoodGhpcy5yb290PWModGhpcy5fY0xvYygpLnNwbGl0KFwiP1wiKVswXSx0aGlzLl9yb3V0ZXMpLHRoaXMucm9vdCl9LF9saXN0ZW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMuX3VzZVB1c2hTdGF0ZSl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsdGhpcy5fb25Mb2NhdGlvbkNoYW5nZSk7ZWxzZSBpZihmKCkpd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsdGhpcy5fb25Mb2NhdGlvbkNoYW5nZSk7ZWxzZXt2YXIgdD10aGlzLl9jTG9jKCksbj12b2lkIDAsbz12b2lkIDA7bz1mdW5jdGlvbigpe249ZS5fY0xvYygpLHQhPT1uJiYodD1uLGUucmVzb2x2ZSgpKSxlLl9saXN0ZW5pbmdJbnRlcnZhbD1zZXRUaW1lb3V0KG8sMjAwKX0sbygpfX0sX2NMb2M6ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cuX19OQVZJR09fV0lORE9XX0xPQ0FUSU9OX01PQ0tfXz93aW5kb3cuX19OQVZJR09fV0lORE9XX0xPQ0FUSU9OX01PQ0tfXzpzKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTpcIlwifSxfZmluZExpbmtzOmZ1bmN0aW9uKCl7cmV0dXJuW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtbmF2aWdvXVwiKSl9LF9vbkxvY2F0aW9uQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5yZXNvbHZlKCl9LF9jYWxsTGVhdmU6ZnVuY3Rpb24oKXt0aGlzLl9sYXN0Um91dGVSZXNvbHZlZCYmdGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQuaG9va3MmJnRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkLmhvb2tzLmxlYXZlJiZ0aGlzLl9sYXN0Um91dGVSZXNvbHZlZC5ob29rcy5sZWF2ZSh0aGlzLl9sYXN0Um91dGVSZXNvbHZlZC5wYXJhbXMpfX0saS5QQVJBTUVURVJfUkVHRVhQPS8oWzoqXSkoXFx3KykvZyxpLldJTERDQVJEX1JFR0VYUD0vXFwqL2csaS5SRVBMQUNFX1ZBUklBQkxFX1JFR0VYUD1cIihbXi9dKylcIixpLlJFUExBQ0VfV0lMRENBUkQ9XCIoPzouKilcIixpLkZPTExPV0VEX0JZX1NMQVNIX1JFR0VYUD1cIig/Oi8kfCQpXCIsaS5NQVRDSF9SRUdFWFBfRkxBR1M9XCJcIix0W1wiZGVmYXVsdFwiXT1pLGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX1dKX0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmF2aWdvLm1pbi5qcy5tYXAiLCJcbmNvbnN0IHZhcmlhYmxlcyA9IHJlcXVpcmUoJy4vbW9kdWxlcy92YXJpYWJsZXMnKTtcbmNvbnN0IGluaXQgPSByZXF1aXJlKCcuL21vZHVsZXMvbG9naW4nKTtcbmNvbnN0IGxvZ2luQnlFbWFpbCA9IHJlcXVpcmUoJy4vbW9kdWxlcy9sb2dpbicpO1xuY29uc3QgZ2V0QWxsVHdlZXRzID0gcmVxdWlyZSgnLi9tb2R1bGVzL3R3ZWV0cycpO1xuXG52YXJpYWJsZXMucm91dGVyXG4gIC5vbignLycsIGluaXQpXG4gIC5vbignL2FkbWluJywgbG9naW5CeUVtYWlsKVxuICAub24oJy9hZG1pbi10d2VldHMnLCBnZXRBbGxUd2VldHMpXG4gIC5yZXNvbHZlKCk7XG4iLCJjb25zdCB2YXJpYWJsZXMgPSByZXF1aXJlKCcuL3ZhcmlhYmxlcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gIGZpcmViYXNlLmF1dGgoKVxuICAgIC5nZXRSZWRpcmVjdFJlc3VsdCgpXG4gICAgICAudGhlbiggcmVzdWx0ID0+IHtcblxuICAgICAgICBpZiAocmVzdWx0LnVzZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAocmVzdWx0LmFkZGl0aW9uYWxVc2VySW5mby5pc05ld1VzZXIpe1xuICAgICAgICAgICAgc2F2ZVVzZXIocmVzdWx0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3lhIGVzdMOhIGVuIGxhIGJhc2UgZGUgZGF0b3MnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLmNhdGNoKCBlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgLy8gSGFuZGxlIEVycm9ycyBoZXJlLlxuICAgICAgICBjb25zdCBlcnJvckNvZGUgPSBlcnJvci5jb2RlO1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICAvLyBUaGUgZW1haWwgb2YgdGhlIHVzZXIncyBhY2NvdW50IHVzZWQuXG4gICAgICAgIGNvbnN0IGVtYWlsID0gZXJyb3IuZW1haWw7XG4gICAgICAgIC8vIFRoZSBmaXJlYmFzZS5hdXRoLkF1dGhDcmVkZW50aWFsIHR5cGUgdGhhdCB3YXMgdXNlZC5cbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IGVycm9yLmNyZWRlbnRpYWw7XG4gICAgICAgIC8vIC4uLlxuICAgICAgfSk7XG5cbiAgZmlyZWJhc2UuYXV0aCgpXG4gICAgLm9uQXV0aFN0YXRlQ2hhbmdlZCggdXNlciA9PiB7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBpZiAodXNlci51aWQgPT09ICc4VENTRDlGUG9UaDJScUR3cTk4Y1pRaE11SW4yJykge1xuICAgICAgICAgIHRvZ2dsZUhlYWRlcih1c2VyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBnZXRNeVR3ZWV0cygpO1xuICAgICAgICB0b2dnbGVIZWFkZXIodXNlcik7XG5cbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPVxuICAgICAgICBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1haW4tY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWFpbi1jb250YWluZXItLWRpdlwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWFpbi10ZXh0YXJlYVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJ0d2VldFwiIG5hbWU9XCJ0d2VldFwiIHBsYWNlaG9sZGVyPVwidHUgdHdlZXQuLi5cIiBjb250ZW50RWRpdGFibGU9XCJ0cnVlXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJzZW5kLXR3ZWV0XCI+RW52aWFyIHR3ZWV0PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBtYWluLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIHRlbXBsYXRlKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3R3ZWV0JylcbiAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBsaW1pdENoYXJzLCBmYWxzZSk7XG5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlbmQtdHdlZXQnKVxuICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbmRUd2VldCwgZmFsc2UpO1xuXG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhcmlhYmxlcy5yb3V0ZXIubmF2aWdhdGUoJy8nKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hlYWRlci13ZWxjb21lJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9XG4gICAgICAgIGBcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1haW4tY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1haW4tY29udGFpbmVyLS1kaXZcIj5cbiAgICAgICAgICAgIDxidXR0b24+bG9naW4gY29uIHR3aXR0ZXI8L2J1dHRvbj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJhZG1pbi1jaGVja2JveFwiID48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJhZG1pbi1jaGVja2JveFwiIC8+IMK/RXJlcyBhZG1pbj88L2xhYmVsPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICB2YXJpYWJsZXMubWFpbi5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCB0ZW1wbGF0ZSk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWNvbnRhaW5lciBidXR0b24nKVxuICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxvZ2luQnlUd2l0dGVyLCBmYWxzZSk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZG1pbi1jaGVja2JveCcpXG4gICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZ29Ub0FkbWluLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGxvZ2luQnlUd2l0dGVyICgpIHtcbiAgY29uc3QgcHJvdmlkZXIgPSBuZXcgZmlyZWJhc2UuYXV0aC5Ud2l0dGVyQXV0aFByb3ZpZGVyKCk7XG5cbiAgZmlyZWJhc2UuYXV0aCgpXG4gICAgLnNpZ25JbldpdGhSZWRpcmVjdChwcm92aWRlcik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGxvZ091dCAoKSB7XG4gIG1haW4uaW5uZXJIVE1MID0gJyc7XG4gIGZpcmViYXNlLmF1dGgoKS5zaWduT3V0KCk7XG4gIHZhcmlhYmxlcy5yb3V0ZXIubmF2aWdhdGUoJy8nKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbG9naW4gKCkge1xuICBjb25zdCBlbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1lbWFpbCcpLnZhbHVlO1xuICBjb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1wYXNzd29yZCcpLnZhbHVlO1xuXG4gIGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpXG4gICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICB2YXJpYWJsZXMucm91dGVyLm5hdmlnYXRlKGAvYWRtaW4tdHdlZXRzL2ApO1xuICAgIH0pXG4gICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbG9naW5CeUVtYWlsKCkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgI2hlYWRlci13ZWxjb21lJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLmlubmVySFRNTCA9ICcnO1xuICBsZXQgdGVtcGxhdGUgPSAnJztcbiAgdGVtcGxhdGUgPVxuICBgXG4gIDxkaXYgaWQ9XCJvd3MtbG9naW5cIj5cbiAgICA8aW5wdXQgaWQ9XCJsb2dpbi1lbWFpbFwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJjb3JyZW8gZWxlY3Ryw7NuaWNvXCIvPlxuICAgIDxpbnB1dCBpZD1cImxvZ2luLXBhc3N3b3JkXCIgdHlwZT1cInBhc3N3b3JkXCIgcGxhY2Vob2xkZXI9XCJjb250cmFzZcOxYVwiLz5cbiAgICA8YSBocmVmPVwiI1wiIGlkPVwibG9naW4tbG9naW5cIj5lbnRyYXI8L2E+XG4gIDwvZGl2PlxuICBgO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCB0ZW1wbGF0ZSk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1sb2dpbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbW9kdWxlLmV4cG9ydHMubG9naW4sIGZhbHNlKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzZW5kVHdlZXQgKCkge1xuICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0d2VldCcpO1xuXG4gIHVpZCA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51aWQ7XG4gIGNvbnN0IHVzZXIgPSB1c2Vycy5jaGlsZCh1aWQpO1xuICBjb25zdCB0d2VldHMgPSB1c2VyLmNoaWxkKCd0d2VldHMnKTtcbiAgY29uc3QgdHdlZXQgPSB0d2VldHMucHVzaCgpO1xuXG4gIHR3ZWV0LnVwZGF0ZSh7XG4gICAgbWVzc2FnZTogdGV4dEFyZWEudGV4dENvbnRlbnQsXG4gICAgZGF0ZTogbmV3IERhdGUoKS5nZXRUaW1lKCksXG4gICAgc3RhdGU6ICcnLFxuICB9KTtcblxuICB0ZXh0QXJlYS50ZXh0Q29udGVudCA9ICcnO1xuXG4gIGdldE15VHdlZXRzKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldE15VHdlZXRzICgpIHtcblxuICB1c2Vycy5vbigndmFsdWUnLCAoc25hcHNob3QpID0+IHtcblxuICAgIHNuYXBzaG90LmZvckVhY2godXNlciA9PiB7XG4gICAgICBsZXQgbXlUd2VldHMgPSBbXTtcbiAgICAgIHVzZXIuZm9yRWFjaChrZXkgPT4ge1xuXG4gICAgICAgIGlmIChrZXkua2V5ID09PSAndHdlZXRzJykge1xuXG4gICAgICAgICAga2V5LmZvckVhY2goIHR3ZWV0ID0+IHtcblxuICAgICAgICAgICAgbXlUd2VldHMudW5zaGlmdChcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGU6IHR3ZWV0LnZhbCgpLmRhdGUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogdHdlZXQudmFsKCkubWVzc2FnZSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogdHdlZXQudmFsKCkuc3RhdGVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJlbmRlck15VHdlZXRzKG15VHdlZXRzKTtcbiAgICAgICAgfVxuXG4gICAgICB9KTtcblxuICAgIH0pO1xuXG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVkaXRUd2VldChldmVudCkge1xuICBjb25zb2xlLmxvZyhldmVudCk7XG4gIGNvbnN0IHJlZiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKGB1c2Vycy8ke2V2ZW50LmN1cnJlbnRUYXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQuaWR9L3R3ZWV0cy9gKTtcbiAgcmVmLmNoaWxkKGV2ZW50LnRhcmdldC5pZCkucmVtb3ZlKCk7XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcHVibGlzaFR3ZWV0KGV2ZW50KSB7XG4gIGNvbnN0IHJlZiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKGB1c2Vycy8ke2V2ZW50LmN1cnJlbnRUYXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQuaWR9L3R3ZWV0cy8ke2V2ZW50LnRhcmdldC5pZH1gKTtcbiAgcmVmLnVwZGF0ZSh7c3RhdGU6IHRydWV9KTtcbiAgZXZlbnQudGFyZ2V0LnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgZ3JlZW4nO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZWplY3RUd2VldChldmVudCkge1xuICBjb25zdCByZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZihgdXNlcnMvJHtldmVudC5jdXJyZW50VGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLmlkfS90d2VldHMvJHtldmVudC50YXJnZXQuaWR9YCk7XG4gIHJlZi51cGRhdGUoe3N0YXRlOiBmYWxzZX0pO1xuICBldmVudC50YXJnZXQuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCByZWQnO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRBbGxUd2VldHMgKCkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuaW5uZXJIVE1MID0gJyc7XG4gIHVzZXJzLm9uY2UoJ3ZhbHVlJywgKHNuYXBzaG90KSA9PiB7XG5cbiAgICBsZXQgYWxsVHdlZXRzID0gW107XG4gICAgbGV0IHR3ZWV0c0J5VXNlciA9IHtcbiAgICAgIGlkOiAnJyxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgdHdlZXRzOiBbXVxuICAgIH07XG5cbiAgICBzbmFwc2hvdC5mb3JFYWNoKHVzZXIgPT4ge1xuICAgICAgdHdlZXRzQnlVc2VyLmlkID0gdXNlci52YWwoKS51aWQ7XG4gICAgICB0d2VldHNCeVVzZXIubmFtZSA9IHVzZXIudmFsKCkudXNlcm5hbWU7XG5cbiAgICAgIHVzZXIuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpZiAoa2V5LmtleSA9PT0gJ3R3ZWV0cycpIHtcblxuICAgICAgICAgIGtleS5mb3JFYWNoKCB0d2VldCA9PiB7XG4gICAgICAgICAgICB0d2VldHNCeVVzZXIudHdlZXRzLnB1c2goXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogdHdlZXQua2V5LFxuICAgICAgICAgICAgICAgIGRhdGU6IHR3ZWV0LnZhbCgpLmRhdGUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogdHdlZXQudmFsKCkubWVzc2FnZSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogdHdlZXQudmFsKCkuc3RhdGVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICB9KTtcbiAgICAgIGFsbFR3ZWV0cy5wdXNoKHR3ZWV0c0J5VXNlcik7XG5cbiAgICB9KTtcbiAgICByZW5kZXJBbGxUd2VldHMoYWxsVHdlZXRzKTtcbiAgfSk7XG59OyIsImNvbnN0IE5hdmlnbyA9IHJlcXVpcmUoJ25hdmlnbycpO1xuXG4vLyBtb2R1bGUuZXhwb3J0cy5tYWluID0gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcblxuLy8gY29uc3Qgcm9vdERCID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKTtcbi8vIG1vZHVsZS5leHBvcnRzLnVzZXJzID0gcm9vdERCLmNoaWxkKCd1c2VycycpO1xuXG5jb25zdCByb290ID0gbnVsbDtcbmNvbnN0IHVzZUhhc2ggPSB0cnVlOyAvLyBEZWZhdWx0cyB0bzogZmFsc2VcbmNvbnN0IGhhc2ggPSAnIyEnOyAvLyBEZWZhdWx0cyB0bzogJyMnXG5tb2R1bGUuZXhwb3J0cy5yb3V0ZXIgPSBuZXcgTmF2aWdvKHJvb3QsIHVzZUhhc2gsIGhhc2gpOyJdfQ==
