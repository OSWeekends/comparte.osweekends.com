(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Navigo",[],t):"object"==typeof exports?exports.Navigo=t():e.Navigo=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function i(e,t,n){this.root=null,this._routes=[],this._useHash=t,this._hash="undefined"==typeof n?"#":n,this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!t&&o(),this._onLocationChange=this._onLocationChange.bind(this),this._genericHooks=null,this._historyAPIUpdateMethod="pushState",e?this.root=t?e.replace(/\/$/,"/"+this._hash):e.replace(/\/$/,""):t&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}function s(e){return e instanceof RegExp?e:e.replace(/\/+$/,"").replace(/^\/+/,"^/")}function r(e,t){return 0===t.length?null:e?e.slice(1,e.length).reduce(function(e,n,o){return null===e&&(e={}),e[t[o]]=decodeURIComponent(n),e},null):null}function a(e){var t,n=[];return t=e instanceof RegExp?e:new RegExp(e.replace(i.PARAMETER_REGEXP,function(e,t,o){return n.push(o),i.REPLACE_VARIABLE_REGEXP}).replace(i.WILDCARD_REGEXP,i.REPLACE_WILDCARD)+i.FOLLOWED_BY_SLASH_REGEXP,i.MATCH_REGEXP_FLAGS),{regexp:t,paramNames:n}}function u(e){return e.replace(/\/$/,"").split("/").length}function h(e,t){return u(t)-u(e)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map(function(t){var n=a(s(t.route)),o=n.regexp,i=n.paramNames,u=e.replace(/^\/+/,"/").match(o),h=r(u,i);return!!u&&{match:u,route:t,params:h}}).filter(function(e){return e})}function d(e,t){return l(e,t)[0]||!1}function c(e,t){var n=t.map(function(t){return""===t.route||"*"===t.route?e:e.split(new RegExp(t.route+"($|/)"))[0]}),o=s(e);return n.length>1?n.reduce(function(e,t){return e.length>t.length&&(e=t),e},n[0]):1===n.length?n[0]:o}function f(){return!!("undefined"!=typeof window&&"onhashchange"in window)}function _(e){return e.split(/\?(.*)?$/).slice(1).join("")}function p(e,t,n){var i,s=e,r=function(e){return e.split(/\?(.*)?$/)[0]};return"undefined"==typeof n&&(n="#"),o()&&!t?s=r(e).split(n)[0]:(i=e.split(n),s=r(i.length>1?i[1]:i[0])),s}function v(e,t,n){return t&&"object"===("undefined"==typeof t?"undefined":g(t))?void(t.before?t.before(function(){var o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];o&&(e(),t.after&&t.after(n))},n):t.after&&(e(),t.after&&t.after(n))):void e()}function R(e,t,n){if(o()&&!t)return!1;if(!e.match(n))return!1;var i=e.split(n);return i.length<2||""===i[1]}Object.defineProperty(t,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.prototype={helpers:{match:d,root:c,clean:s,getOnlyURL:p},navigate:function(e,t){var n;return e=e||"",this._usePushState?(n=(t?"":this._getRoot()+"/")+e.replace(/^\/+/,"/"),n=n.replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",n),this.resolve()):"undefined"!=typeof window&&(e=e.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+e),this},on:function(){for(var e=this,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];if("function"==typeof n[0])this._defaultHandler={handler:n[0],hooks:n[1]};else if(n.length>=2)if("/"===n[0]){var i=n[1];"object"===g(n[1])&&(i=n[1].uses),this._defaultHandler={handler:i,hooks:n[2]}}else this._add(n[0],n[1],n[2]);else if("object"===g(n[0])){var s=Object.keys(n[0]).sort(h);s.forEach(function(t){e.on(t,n[0][t])})}return this},off:function(e){return null!==this._defaultHandler&&e===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&e===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce(function(t,n){return n.handler!==e&&t.push(n),t},[]),this},notFound:function(e,t){return this._notFoundHandler={handler:e,hooks:t},this},resolve:function(e){var t,o,i=this,s=(e||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(s=s.replace(new RegExp("^/"+this._hash),"/"));var r=_(e||this._cLoc()),a=p(s,this._useHash,this._hash);return!this._paused&&(this._lastRouteResolved&&a===this._lastRouteResolved.url&&r===this._lastRouteResolved.query?(this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1):(o=d(a,this._routes))?(this._callLeave(),this._lastRouteResolved={url:a,query:r,hooks:o.route.hooks,params:o.params,name:o.route.name},t=o.route.handler,v(function(){v(function(){o.route.route instanceof RegExp?t.apply(void 0,n(o.match.slice(1,o.match.length))):t(o.params,r)},o.route.hooks,o.params,i._genericHooks)},this._genericHooks,o.params),o):this._defaultHandler&&(""===a||"/"===a||a===this._hash||R(a,this._useHash,this._hash))?(v(function(){v(function(){i._callLeave(),i._lastRouteResolved={url:a,query:r,hooks:i._defaultHandler.hooks},i._defaultHandler.handler(r)},i._defaultHandler.hooks)},this._genericHooks),!0):(this._notFoundHandler&&v(function(){v(function(){i._callLeave(),i._lastRouteResolved={url:a,query:r,hooks:i._notFoundHandler.hooks},i._notFoundHandler.handler(r)},i._notFoundHandler.hooks)},this._genericHooks),!1))},destroy:function(){this._routes=[],this._destroyed=!0,clearTimeout(this._listeningInterval),"undefined"!=typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var e=this;"undefined"!=typeof document&&this._findLinks().forEach(function(t){t.hasListenerAttached||(t.addEventListener("click",function(n){var o=e.getLinkPath(t);e._destroyed||(n.preventDefault(),e.navigate(o.replace(/\/+$/,"").replace(/^\/+/,"/")))}),t.hasListenerAttached=!0)})},generate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._routes.reduce(function(n,o){var i;if(o.name===e){n=o.route;for(i in t)n=n.toString().replace(":"+i,t[i])}return n},"");return this._useHash?this._hash+n:n},link:function(e){return this._getRoot()+e},pause:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=e,e?this._historyAPIUpdateMethod="replaceState":this._historyAPIUpdateMethod="pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(e){return"undefined"==typeof e?this._historyAPIUpdateMethod:(this._historyAPIUpdateMethod=e,e)},disableIfAPINotAvailable:function(){o()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(e){return e.getAttribute("href")},hooks:function(e){this._genericHooks=e},_add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"string"==typeof e&&(e=encodeURI(e)),"object"===("undefined"==typeof t?"undefined":g(t))?this._routes.push({route:e,handler:t.uses,name:t.as,hooks:n||t.hooks}):this._routes.push({route:e,handler:t,hooks:n}),this._add},_getRoot:function(){return null!==this.root?this.root:(this.root=c(this._cLoc().split("?")[0],this._routes),this.root)},_listen:function(){var e=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if(f())window.addEventListener("hashchange",this._onLocationChange);else{var t=this._cLoc(),n=void 0,o=void 0;o=function(){n=e._cLoc(),t!==n&&(t=n,e.resolve()),e._listeningInterval=setTimeout(o,200)},o()}},_cLoc:function(){return"undefined"!=typeof window?"undefined"!=typeof window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:s(window.location.href):""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){this._lastRouteResolved&&this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.leave&&this._lastRouteResolved.hooks.leave(this._lastRouteResolved.params)}},i.PARAMETER_REGEXP=/([:*])(\w+)/g,i.WILDCARD_REGEXP=/\*/g,i.REPLACE_VARIABLE_REGEXP="([^/]+)",i.REPLACE_WILDCARD="(?:.*)",i.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)",i.MATCH_REGEXP_FLAGS="",t["default"]=i,e.exports=t["default"]}])});

},{}],2:[function(require,module,exports){
// if ('serviceWorker' in navigator) {
//   window.addEventListener('load', () => {
//     navigator.serviceWorker.register('./sw.js')
//       .then(register => console.log('SW regitrado!'))
//       .catch(error => console.log(error));
//   });
// }
var router = require('./modules/variables');

var init = require('./modules/init');

var loginByEmail = require('./modules/loginByEmail');

var getAllTweets = require('./modules/getAllTweets');

router.on('/', init).on('/admin', loginByEmail).on('/admin-tweets', getAllTweets).resolve();

},{"./modules/getAllTweets":3,"./modules/init":4,"./modules/loginByEmail":5,"./modules/variables":7}],3:[function(require,module,exports){
function getAllTweets() {
  document.querySelector('main').innerHTML = '';
  var rootDB = firebase.database().ref();
  var users = rootDB.child('users');
  users.once('value', function (snapshot) {
    var userId;
    var userName;
    var userImage;
    var allTweets = [];
    var tweetsByUser = {
      tweetId: '',
      tweetDate: '',
      tweetMessage: '',
      tweetState: '',
      userId: '',
      userName: '',
      userImage: ''
    };
    snapshot.forEach(function (user) {
      userId = user.val().uid;
      userName = user.val().username;
      userImage = user.val().photoURL;
      user.forEach(function (key) {
        if (key.key === 'tweets') {
          key.forEach(function (tweet) {
            tweetsByUser.tweetId = tweet.key;
            tweetsByUser.tweetDate = tweet.val().date;
            tweetsByUser.tweetMessage = tweet.val().message;
            tweetsByUser.tweetState = tweet.val().state;
            tweetsByUser.userId = userId;
            tweetsByUser.userName = userName;
            tweetsByUser.userImage = userImage; // console.log(tweetsByUser);

            allTweets.unshift(Object.assign({}, tweetsByUser));
          });
        }
      });
    }); // console.log(allTweets);

    renderAllTweets(allTweets);
  });
}

function renderAllTweets(userToRender) {
  document.querySelector('header').style.display = 'flex';
  console.log(userToRender);
  userToRender.forEach(function (tweet) {
    var template = '<div class="ows-user-tweets--tweet">';
    template += '<div class="ows-user-tweets--image">';
    template += '<img src="' + tweet.userImage + '" class="ows-user-tweets--image">';
    template += '</img>';
    template += '</div>';
    template += '<div class="ows-user-tweets--details">';
    template += '<div class="ows-user-tweets--date-user">';
    template += '<div class="ows-user-tweets--date">' + new Date(tweet.tweetDate).toLocaleString() + '</div>';
    template += '<div class="ows-user-tweets--user">@' + tweet.userName + '</div>';
    template += '</div>';
    template += '<div class="ows-user-tweets--message">' + tweet.tweetMessage + '</div>';
    template += '<ul class="ows-user-tweets--buttons">';
    template += '<li class="ows-btn-actions"><button id=' + tweet.tweetId + ' name="editTweet" class="btn">editar</button></li>';
    template += '<li class="ows-btn-actions"><button id=' + tweet.tweetId + ' name="publishTweet" class="btn">publicar</button></li>';
    template += '<li class="ows-btn-actions"><button id=' + tweet.tweetId + ' name="rejectTweet" class="btn">rechazar</button></li>';
    template += '</ul>';
    template += '</div>';
    template += '</div>'; // template += '</div>';

    document.querySelector('main').insertAdjacentHTML('afterbegin', template);
  });
  document.querySelector('main').addEventListener('click', function (event) {
    if (event.target.tagName === 'BUTTON' && event.target.name === 'editTweet') {
      editTweet(event);
    } else if (event.target.tagName === 'BUTTON' && event.target.name === 'publishTweet') {
      publishTweet(event);
    } else if (event.target.tagName === 'BUTTON' && event.target.name === 'rejectTweet') {
      rejectTweet(event);
    }
  }, false);
}

module.exports = getAllTweets;

},{}],4:[function(require,module,exports){
var router = require('./variables');

var utils = require('./utils');

var main = document.querySelector('main');

function init() {
  firebase.auth().getRedirectResult().then(function (result) {
    if (result.user !== null) {
      if (result.additionalUserInfo.isNewUser) {
        saveUser(result);
      } else {
        console.log('ya está en la base de datos');
      }
    }
  }).catch(function (error) {
    console.log('error', error); // Handle Errors here.

    var errorCode = error.code;
    var errorMessage = error.message; // The email of the user's account used.

    var email = error.email; // The firebase.auth.AuthCredential type that was used.

    var credential = error.credential; // ...
  });
  firebase.auth().onAuthStateChanged(function (user) {
    if (user) {
      if (user.uid === '8TCSD9FPoTh2RqDwq98cZQhMuIn2') {
        utils.toggleHeader(user);
        return;
      }

      utils.getMyTweets();
      utils.toggleHeader(user);
      var template = "\n          <div class=\"main-container\">\n            <div class=\"main-container--tweet\">\n              <div class=\"main-textarea\">\n                <div id=\"tweet\" name=\"tweet\" placeholder=\"tu tweet...\" contentEditable=\"true\"></div>\n              </div>\n\n              <button id=\"main-container--tweet-send-tweet\">Enviar tweet</button>\n            </div>\n          </div>\n        ";
      main.insertAdjacentHTML('afterbegin', template);
      document.querySelector('#tweet').addEventListener('keyup', utils.limitChars, false);
      document.querySelector('#main-container--tweet-send-tweet').addEventListener('click', utils.sendTweet, false);
    } else {
      router.navigate('/');
      document.querySelector('header').style.display = 'none';
      document.querySelector('footer').style.display = 'none';
      document.querySelector('main').innerHTML = '';
      var _template = "\n        <div class=\"main-container\">\n          <div class=\"main-container--div\">\n            <div class=\"main-container--div--logo\">\n              <img src=\"./../src/img/icons/icon-72x72.png\" />\n            </div>\n            <button class=\"main-container--div--btn-twitter\">Login con Twitter</button>\n            <p id=\"admin-checkbox\"><a href=\"/#!/admin\">\xBFEres admin?</a></p>\n          </div>\n        </div>\n        ";
      main.insertAdjacentHTML('afterbegin', _template);
      document.querySelector('.main-container button').addEventListener('click', utils.loginByTwitter, false);
      document.querySelector('#admin-checkbox').addEventListener('click', utils.goToAdmin, false);
    }
  });
}

module.exports = init;

},{"./utils":6,"./variables":7}],5:[function(require,module,exports){
var utils = require('./utils');

function loginByEmail() {
  document.querySelector('header #header-welcome').style.display = 'none';
  document.querySelector('main').innerHTML = '';
  var template = '';
  template = "\n  <div class=\"main-container\">\n    <div class=\"main-container--div\">\n      <div class=\"main-container--div--logo\">\n        <img src=\"./../src/img/icons/icon-72x72.png\" />\n      </div>\n\n      <div id=\"ows-login\">\n        <input id=\"login-email\" type=\"text\" placeholder=\"correo electr\xF3nico\"/>\n        <input id=\"login-password\" type=\"password\" placeholder=\"contrase\xF1a\"/>\n        <a href=\"#\" id=\"login-login\">ENTRAR</a>\n      </div>\n    </div>\n  </div>\n  ";
  document.querySelector('main').insertAdjacentHTML('afterbegin', template);
  document.querySelector('#login-login').addEventListener('click', utils.login, false);
}

module.exports = loginByEmail;

},{"./utils":6}],6:[function(require,module,exports){
var router = require('./variables');

var rootDB = firebase.database().ref();
var users = rootDB.child('users');

function goToAdmin(event) {
  if (event.target.checked) {
    router.navigate("/admin");
  }
}

function login() {
  var email = document.querySelector('#login-email').value;
  var password = document.querySelector('#login-password').value;
  firebase.auth().signInWithEmailAndPassword(email, password).then(function (data) {
    router.navigate("/admin-tweets/");
  }).catch(function (error) {
    console.log(error);
  });
}

function loginByTwitter() {
  var provider = new firebase.auth.TwitterAuthProvider();
  firebase.auth().signInWithRedirect(provider);
}

function getMyTweets() {
  users.on('value', function (snapshot) {
    snapshot.forEach(function (user) {
      var myTweets = [];
      user.forEach(function (key) {
        if (key.key === 'tweets') {
          key.forEach(function (tweet) {
            myTweets.unshift({
              date: tweet.val().date,
              message: tweet.val().message,
              state: tweet.val().state
            });
          });
          renderMyTweets(myTweets);
        }
      });
    });
  });
}

function toggleHeader(user) {
  if (user.uid !== '8TCSD9FPoTh2RqDwq98cZQhMuIn2') {
    document.querySelector('header #header-welcome').style.display = 'flex';
    document.querySelector('#header-user--username').textContent = user.displayName;
    document.querySelector('header #header-welcome .header-avatar img').setAttribute('src', user.photoURL); // document.querySelector('.header-avatar').appendChild(img);

    document.querySelector('.header-user--logout button').addEventListener('click', logOut, false);
  } else {
    document.querySelector('header #header-welcome').style.display = 'flex';
    var adorableImg = "https://api.adorable.io/avatars/48/".concat(user.email);
    document.querySelector('#header-user--username').textContent = 'ADMIN';
    document.querySelector('header #header-welcome .header-avatar img').setAttribute('src', adorableImg); // document.querySelector('.header-avatar').appendChild(img);

    document.querySelector('.header-user--logout button').addEventListener('click', logOut, false);
  }
}

function renderMyTweets(myTweets) {
  if (document.querySelector('.container-tweets')) {
    document.querySelector('.container-tweets').innerHTML = '';
  }

  var template = '<div class="container-tweets">';
  template += '<ul>';
  myTweets.forEach(function (tweet) {
    template += '<li>';
    template += '<p>' + tweet.message + '</p>';
    template += '<div class="container-tweets-details">';
    template += '<div class="container-tweets-details-date">' + new Date(tweet.date).toLocaleString() + '</div>';
    template += '<div class="container-tweets-details-state"><span class="container-tweets-details-state-">Estado:</span> ' + isTweetPublished(tweet.state) + '</div>';
    template += '</div>';
    template += '</li>';
  });
  template += '</ul>';
  template += '</div>';
  document.querySelector('.main-container').insertAdjacentHTML('afterend', template);
}

function isTweetPublished(state) {
  if (state === '') {
    return 'Pendiente';
  } else if (state === true) {
    return 'Aprobado';
  } else if (state === false) {
    return 'Rechazado';
  }
}

function logOut() {
  document.querySelector('main').innerHTML = '';
  firebase.auth().signOut();
  router.navigate('/');
}
/**
   * https://codepen.io/gtb104/pen/pztgH
   * @param {*} event
   */


function limitChars(event) {
  // console.log(event.target.innerText.length);
  var text = event.target.innerText;

  if (event.keyCode !== 37 && event.keyCode !== 38 && event.keyCode !== 39 && event.keyCode !== 40) {
    if (text.length > 279) {
      var textarea = document.querySelector('#tweet');
      var textExtra = text.slice(0, 279);
      var newString = "".concat(textExtra, "<span class=\"tweet-error\">").concat(text.slice(279), "</span>");
      event.target.innerHTML = newString;
      range = document.createRange();
      range.selectNodeContents(textarea);
      range.collapse(false);
      selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      document.querySelector('#send-tweet').disabled = true;
    } else {
      document.querySelector('#send-tweet').disabled = false;
    }
  }
}

function sendTweet() {
  var textArea = document.querySelector('#tweet');
  uid = firebase.auth().currentUser.uid;
  var user = users.child(uid);
  var tweets = user.child('tweets');
  var tweet = tweets.push();
  tweet.update({
    message: textArea.textContent,
    date: new Date().getTime(),
    state: ''
  });
  textArea.textContent = '';
  getMyTweets();
}

module.exports = {
  goToAdmin: goToAdmin,
  login: login,
  loginByTwitter: loginByTwitter,
  getMyTweets: getMyTweets,
  toggleHeader: toggleHeader,
  limitChars: limitChars,
  sendTweet: sendTweet
};

},{"./variables":7}],7:[function(require,module,exports){
var Navigo = require('navigo');

var root = null;
var useHash = true; // Defaults to: false

var hash = '#!'; // Defaults to: '#'

var router = new Navigo(root, useHash, hash);
module.exports = router;

},{"navigo":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy5udm0vdmVyc2lvbnMvbm9kZS92MTAuMTQuMC9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIm5vZGVfbW9kdWxlcy9uYXZpZ28vbGliL25hdmlnby5taW4uanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9tb2R1bGVzL2dldEFsbFR3ZWV0cy5qcyIsInNyYy9qcy9tb2R1bGVzL2luaXQuanMiLCJzcmMvanMvbW9kdWxlcy9sb2dpbkJ5RW1haWwuanMiLCJzcmMvanMvbW9kdWxlcy91dGlscy5qcyIsInNyYy9qcy9tb2R1bGVzL3ZhcmlhYmxlcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMscUJBQUQsQ0FBdEI7O0FBQ0EsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLGdCQUFELENBQXBCOztBQUNBLElBQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyx3QkFBRCxDQUE1Qjs7QUFDQSxJQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsd0JBQUQsQ0FBNUI7O0FBRUEsTUFBTSxDQUNILEVBREgsQ0FDTSxHQUROLEVBQ1csSUFEWCxFQUVHLEVBRkgsQ0FFTSxRQUZOLEVBRWdCLFlBRmhCLEVBR0csRUFISCxDQUdNLGVBSE4sRUFHdUIsWUFIdkIsRUFJRyxPQUpIOzs7QUNiQSxTQUFTLFlBQVQsR0FBeUI7QUFDdkIsRUFBQSxRQUFRLENBQUMsYUFBVCxDQUF1QixNQUF2QixFQUErQixTQUEvQixHQUEyQyxFQUEzQztBQUVBLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxRQUFULEdBQW9CLEdBQXBCLEVBQWY7QUFDQSxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBUCxDQUFhLE9BQWIsQ0FBZDtBQUVBLEVBQUEsS0FBSyxDQUFD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c291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiTmF2aWdvXCIsW10sdCk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5OYXZpZ289dCgpOmUuTmF2aWdvPXQoKX0odGhpcyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtmdW5jdGlvbiB0KG8pe2lmKG5bb10pcmV0dXJuIG5bb10uZXhwb3J0czt2YXIgaT1uW29dPXtleHBvcnRzOnt9LGlkOm8sbG9hZGVkOiExfTtyZXR1cm4gZVtvXS5jYWxsKGkuZXhwb3J0cyxpLGkuZXhwb3J0cyx0KSxpLmxvYWRlZD0hMCxpLmV4cG9ydHN9dmFyIG49e307cmV0dXJuIHQubT1lLHQuYz1uLHQucD1cIlwiLHQoMCl9KFtmdW5jdGlvbihlLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PTAsbj1BcnJheShlLmxlbmd0aCk7dDxlLmxlbmd0aDt0Kyspblt0XT1lW3RdO3JldHVybiBufXJldHVybiBBcnJheS5mcm9tKGUpfWZ1bmN0aW9uIG8oKXtyZXR1cm4hKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3d8fCF3aW5kb3cuaGlzdG9yeXx8IXdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSl9ZnVuY3Rpb24gaShlLHQsbil7dGhpcy5yb290PW51bGwsdGhpcy5fcm91dGVzPVtdLHRoaXMuX3VzZUhhc2g9dCx0aGlzLl9oYXNoPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBuP1wiI1wiOm4sdGhpcy5fcGF1c2VkPSExLHRoaXMuX2Rlc3Ryb3llZD0hMSx0aGlzLl9sYXN0Um91dGVSZXNvbHZlZD1udWxsLHRoaXMuX25vdEZvdW5kSGFuZGxlcj1udWxsLHRoaXMuX2RlZmF1bHRIYW5kbGVyPW51bGwsdGhpcy5fdXNlUHVzaFN0YXRlPSF0JiZvKCksdGhpcy5fb25Mb2NhdGlvbkNoYW5nZT10aGlzLl9vbkxvY2F0aW9uQ2hhbmdlLmJpbmQodGhpcyksdGhpcy5fZ2VuZXJpY0hvb2tzPW51bGwsdGhpcy5faGlzdG9yeUFQSVVwZGF0ZU1ldGhvZD1cInB1c2hTdGF0ZVwiLGU/dGhpcy5yb290PXQ/ZS5yZXBsYWNlKC9cXC8kLyxcIi9cIit0aGlzLl9oYXNoKTplLnJlcGxhY2UoL1xcLyQvLFwiXCIpOnQmJih0aGlzLnJvb3Q9dGhpcy5fY0xvYygpLnNwbGl0KHRoaXMuX2hhc2gpWzBdLnJlcGxhY2UoL1xcLyQvLFwiL1wiK3RoaXMuX2hhc2gpKSx0aGlzLl9saXN0ZW4oKSx0aGlzLnVwZGF0ZVBhZ2VMaW5rcygpfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBSZWdFeHA/ZTplLnJlcGxhY2UoL1xcLyskLyxcIlwiKS5yZXBsYWNlKC9eXFwvKy8sXCJeL1wiKX1mdW5jdGlvbiByKGUsdCl7cmV0dXJuIDA9PT10Lmxlbmd0aD9udWxsOmU/ZS5zbGljZSgxLGUubGVuZ3RoKS5yZWR1Y2UoZnVuY3Rpb24oZSxuLG8pe3JldHVybiBudWxsPT09ZSYmKGU9e30pLGVbdFtvXV09ZGVjb2RlVVJJQ29tcG9uZW50KG4pLGV9LG51bGwpOm51bGx9ZnVuY3Rpb24gYShlKXt2YXIgdCxuPVtdO3JldHVybiB0PWUgaW5zdGFuY2VvZiBSZWdFeHA/ZTpuZXcgUmVnRXhwKGUucmVwbGFjZShpLlBBUkFNRVRFUl9SRUdFWFAsZnVuY3Rpb24oZSx0LG8pe3JldHVybiBuLnB1c2gobyksaS5SRVBMQUNFX1ZBUklBQkxFX1JFR0VYUH0pLnJlcGxhY2UoaS5XSUxEQ0FSRF9SRUdFWFAsaS5SRVBMQUNFX1dJTERDQVJEKStpLkZPTExPV0VEX0JZX1NMQVNIX1JFR0VYUCxpLk1BVENIX1JFR0VYUF9GTEFHUykse3JlZ2V4cDp0LHBhcmFtTmFtZXM6bn19ZnVuY3Rpb24gdShlKXtyZXR1cm4gZS5yZXBsYWNlKC9cXC8kLyxcIlwiKS5zcGxpdChcIi9cIikubGVuZ3RofWZ1bmN0aW9uIGgoZSx0KXtyZXR1cm4gdSh0KS11KGUpfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOltdO3JldHVybiB0Lm1hcChmdW5jdGlvbih0KXt2YXIgbj1hKHModC5yb3V0ZSkpLG89bi5yZWdleHAsaT1uLnBhcmFtTmFtZXMsdT1lLnJlcGxhY2UoL15cXC8rLyxcIi9cIikubWF0Y2gobyksaD1yKHUsaSk7cmV0dXJuISF1JiZ7bWF0Y2g6dSxyb3V0ZTp0LHBhcmFtczpofX0pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZX0pfWZ1bmN0aW9uIGQoZSx0KXtyZXR1cm4gbChlLHQpWzBdfHwhMX1mdW5jdGlvbiBjKGUsdCl7dmFyIG49dC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuXCJcIj09PXQucm91dGV8fFwiKlwiPT09dC5yb3V0ZT9lOmUuc3BsaXQobmV3IFJlZ0V4cCh0LnJvdXRlK1wiKCR8LylcIikpWzBdfSksbz1zKGUpO3JldHVybiBuLmxlbmd0aD4xP24ucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubGVuZ3RoPnQubGVuZ3RoJiYoZT10KSxlfSxuWzBdKToxPT09bi5sZW5ndGg/blswXTpvfWZ1bmN0aW9uIGYoKXtyZXR1cm4hIShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZcIm9uaGFzaGNoYW5nZVwiaW4gd2luZG93KX1mdW5jdGlvbiBfKGUpe3JldHVybiBlLnNwbGl0KC9cXD8oLiopPyQvKS5zbGljZSgxKS5qb2luKFwiXCIpfWZ1bmN0aW9uIHAoZSx0LG4pe3ZhciBpLHM9ZSxyPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KC9cXD8oLiopPyQvKVswXX07cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIG4mJihuPVwiI1wiKSxvKCkmJiF0P3M9cihlKS5zcGxpdChuKVswXTooaT1lLnNwbGl0KG4pLHM9cihpLmxlbmd0aD4xP2lbMV06aVswXSkpLHN9ZnVuY3Rpb24gdihlLHQsbil7cmV0dXJuIHQmJlwib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIHQ/XCJ1bmRlZmluZWRcIjpnKHQpKT92b2lkKHQuYmVmb3JlP3QuYmVmb3JlKGZ1bmN0aW9uKCl7dmFyIG89IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXTtvJiYoZSgpLHQuYWZ0ZXImJnQuYWZ0ZXIobikpfSxuKTp0LmFmdGVyJiYoZSgpLHQuYWZ0ZXImJnQuYWZ0ZXIobikpKTp2b2lkIGUoKX1mdW5jdGlvbiBSKGUsdCxuKXtpZihvKCkmJiF0KXJldHVybiExO2lmKCFlLm1hdGNoKG4pKXJldHVybiExO3ZhciBpPWUuc3BsaXQobik7cmV0dXJuIGkubGVuZ3RoPDJ8fFwiXCI9PT1pWzFdfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBnPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9O2kucHJvdG90eXBlPXtoZWxwZXJzOnttYXRjaDpkLHJvb3Q6YyxjbGVhbjpzLGdldE9ubHlVUkw6cH0sbmF2aWdhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4gZT1lfHxcIlwiLHRoaXMuX3VzZVB1c2hTdGF0ZT8obj0odD9cIlwiOnRoaXMuX2dldFJvb3QoKStcIi9cIikrZS5yZXBsYWNlKC9eXFwvKy8sXCIvXCIpLG49bi5yZXBsYWNlKC8oW146XSkoXFwvezIsfSkvZyxcIiQxL1wiKSxoaXN0b3J5W3RoaXMuX2hpc3RvcnlBUElVcGRhdGVNZXRob2RdKHt9LFwiXCIsbiksdGhpcy5yZXNvbHZlKCkpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJihlPWUucmVwbGFjZShuZXcgUmVnRXhwKFwiXlwiK3RoaXMuX2hhc2gpLFwiXCIpLHdpbmRvdy5sb2NhdGlvbi5ocmVmPXdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMkLyxcIlwiKS5yZXBsYWNlKG5ldyBSZWdFeHAodGhpcy5faGFzaCtcIi4qJFwiKSxcIlwiKSt0aGlzLl9oYXNoK2UpLHRoaXN9LG9uOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoLG49QXJyYXkodCksbz0wO288dDtvKyspbltvXT1hcmd1bWVudHNbb107aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgblswXSl0aGlzLl9kZWZhdWx0SGFuZGxlcj17aGFuZGxlcjpuWzBdLGhvb2tzOm5bMV19O2Vsc2UgaWYobi5sZW5ndGg+PTIpaWYoXCIvXCI9PT1uWzBdKXt2YXIgaT1uWzFdO1wib2JqZWN0XCI9PT1nKG5bMV0pJiYoaT1uWzFdLnVzZXMpLHRoaXMuX2RlZmF1bHRIYW5kbGVyPXtoYW5kbGVyOmksaG9va3M6blsyXX19ZWxzZSB0aGlzLl9hZGQoblswXSxuWzFdLG5bMl0pO2Vsc2UgaWYoXCJvYmplY3RcIj09PWcoblswXSkpe3ZhciBzPU9iamVjdC5rZXlzKG5bMF0pLnNvcnQoaCk7cy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uub24odCxuWzBdW3RdKX0pfXJldHVybiB0aGlzfSxvZmY6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT10aGlzLl9kZWZhdWx0SGFuZGxlciYmZT09PXRoaXMuX2RlZmF1bHRIYW5kbGVyLmhhbmRsZXI/dGhpcy5fZGVmYXVsdEhhbmRsZXI9bnVsbDpudWxsIT09dGhpcy5fbm90Rm91bmRIYW5kbGVyJiZlPT09dGhpcy5fbm90Rm91bmRIYW5kbGVyLmhhbmRsZXImJih0aGlzLl9ub3RGb3VuZEhhbmRsZXI9bnVsbCksdGhpcy5fcm91dGVzPXRoaXMuX3JvdXRlcy5yZWR1Y2UoZnVuY3Rpb24odCxuKXtyZXR1cm4gbi5oYW5kbGVyIT09ZSYmdC5wdXNoKG4pLHR9LFtdKSx0aGlzfSxub3RGb3VuZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9ub3RGb3VuZEhhbmRsZXI9e2hhbmRsZXI6ZSxob29rczp0fSx0aGlzfSxyZXNvbHZlOmZ1bmN0aW9uKGUpe3ZhciB0LG8saT10aGlzLHM9KGV8fHRoaXMuX2NMb2MoKSkucmVwbGFjZSh0aGlzLl9nZXRSb290KCksXCJcIik7dGhpcy5fdXNlSGFzaCYmKHM9cy5yZXBsYWNlKG5ldyBSZWdFeHAoXCJeL1wiK3RoaXMuX2hhc2gpLFwiL1wiKSk7dmFyIHI9XyhlfHx0aGlzLl9jTG9jKCkpLGE9cChzLHRoaXMuX3VzZUhhc2gsdGhpcy5faGFzaCk7cmV0dXJuIXRoaXMuX3BhdXNlZCYmKHRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkJiZhPT09dGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQudXJsJiZyPT09dGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQucXVlcnk/KHRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkLmhvb2tzJiZ0aGlzLl9sYXN0Um91dGVSZXNvbHZlZC5ob29rcy5hbHJlYWR5JiZ0aGlzLl9sYXN0Um91dGVSZXNvbHZlZC5ob29rcy5hbHJlYWR5KHRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkLnBhcmFtcyksITEpOihvPWQoYSx0aGlzLl9yb3V0ZXMpKT8odGhpcy5fY2FsbExlYXZlKCksdGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQ9e3VybDphLHF1ZXJ5OnIsaG9va3M6by5yb3V0ZS5ob29rcyxwYXJhbXM6by5wYXJhbXMsbmFtZTpvLnJvdXRlLm5hbWV9LHQ9by5yb3V0ZS5oYW5kbGVyLHYoZnVuY3Rpb24oKXt2KGZ1bmN0aW9uKCl7by5yb3V0ZS5yb3V0ZSBpbnN0YW5jZW9mIFJlZ0V4cD90LmFwcGx5KHZvaWQgMCxuKG8ubWF0Y2guc2xpY2UoMSxvLm1hdGNoLmxlbmd0aCkpKTp0KG8ucGFyYW1zLHIpfSxvLnJvdXRlLmhvb2tzLG8ucGFyYW1zLGkuX2dlbmVyaWNIb29rcyl9LHRoaXMuX2dlbmVyaWNIb29rcyxvLnBhcmFtcyksbyk6dGhpcy5fZGVmYXVsdEhhbmRsZXImJihcIlwiPT09YXx8XCIvXCI9PT1hfHxhPT09dGhpcy5faGFzaHx8UihhLHRoaXMuX3VzZUhhc2gsdGhpcy5faGFzaCkpPyh2KGZ1bmN0aW9uKCl7dihmdW5jdGlvbigpe2kuX2NhbGxMZWF2ZSgpLGkuX2xhc3RSb3V0ZVJlc29sdmVkPXt1cmw6YSxxdWVyeTpyLGhvb2tzOmkuX2RlZmF1bHRIYW5kbGVyLmhvb2tzfSxpLl9kZWZhdWx0SGFuZGxlci5oYW5kbGVyKHIpfSxpLl9kZWZhdWx0SGFuZGxlci5ob29rcyl9LHRoaXMuX2dlbmVyaWNIb29rcyksITApOih0aGlzLl9ub3RGb3VuZEhhbmRsZXImJnYoZnVuY3Rpb24oKXt2KGZ1bmN0aW9uKCl7aS5fY2FsbExlYXZlKCksaS5fbGFzdFJvdXRlUmVzb2x2ZWQ9e3VybDphLHF1ZXJ5OnIsaG9va3M6aS5fbm90Rm91bmRIYW5kbGVyLmhvb2tzfSxpLl9ub3RGb3VuZEhhbmRsZXIuaGFuZGxlcihyKX0saS5fbm90Rm91bmRIYW5kbGVyLmhvb2tzKX0sdGhpcy5fZ2VuZXJpY0hvb2tzKSwhMSkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fcm91dGVzPVtdLHRoaXMuX2Rlc3Ryb3llZD0hMCxjbGVhclRpbWVvdXQodGhpcy5fbGlzdGVuaW5nSW50ZXJ2YWwpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsdGhpcy5fb25Mb2NhdGlvbkNoYW5nZSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsdGhpcy5fb25Mb2NhdGlvbkNoYW5nZSkpfSx1cGRhdGVQYWdlTGlua3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO1widW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmdGhpcy5fZmluZExpbmtzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0Lmhhc0xpc3RlbmVyQXR0YWNoZWR8fCh0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKG4pe3ZhciBvPWUuZ2V0TGlua1BhdGgodCk7ZS5fZGVzdHJveWVkfHwobi5wcmV2ZW50RGVmYXVsdCgpLGUubmF2aWdhdGUoby5yZXBsYWNlKC9cXC8rJC8sXCJcIikucmVwbGFjZSgvXlxcLysvLFwiL1wiKSkpfSksdC5oYXNMaXN0ZW5lckF0dGFjaGVkPSEwKX0pfSxnZW5lcmF0ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj10aGlzLl9yb3V0ZXMucmVkdWNlKGZ1bmN0aW9uKG4sbyl7dmFyIGk7aWYoby5uYW1lPT09ZSl7bj1vLnJvdXRlO2ZvcihpIGluIHQpbj1uLnRvU3RyaW5nKCkucmVwbGFjZShcIjpcIitpLHRbaV0pfXJldHVybiBufSxcIlwiKTtyZXR1cm4gdGhpcy5fdXNlSGFzaD90aGlzLl9oYXNoK246bn0sbGluazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZ2V0Um9vdCgpK2V9LHBhdXNlOmZ1bmN0aW9uKCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXTt0aGlzLl9wYXVzZWQ9ZSxlP3RoaXMuX2hpc3RvcnlBUElVcGRhdGVNZXRob2Q9XCJyZXBsYWNlU3RhdGVcIjp0aGlzLl9oaXN0b3J5QVBJVXBkYXRlTWV0aG9kPVwicHVzaFN0YXRlXCJ9LHJlc3VtZTpmdW5jdGlvbigpe3RoaXMucGF1c2UoITEpfSxoaXN0b3J5QVBJVXBkYXRlTWV0aG9kOmZ1bmN0aW9uKGUpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBlP3RoaXMuX2hpc3RvcnlBUElVcGRhdGVNZXRob2Q6KHRoaXMuX2hpc3RvcnlBUElVcGRhdGVNZXRob2Q9ZSxlKX0sZGlzYWJsZUlmQVBJTm90QXZhaWxhYmxlOmZ1bmN0aW9uKCl7bygpfHx0aGlzLmRlc3Ryb3koKX0sbGFzdFJvdXRlUmVzb2x2ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWR9LGdldExpbmtQYXRoOmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZShcImhyZWZcIil9LGhvb2tzOmZ1bmN0aW9uKGUpe3RoaXMuX2dlbmVyaWNIb29rcz1lfSxfYWRkOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpudWxsLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOm51bGw7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPWVuY29kZVVSSShlKSksXCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgdD9cInVuZGVmaW5lZFwiOmcodCkpP3RoaXMuX3JvdXRlcy5wdXNoKHtyb3V0ZTplLGhhbmRsZXI6dC51c2VzLG5hbWU6dC5hcyxob29rczpufHx0Lmhvb2tzfSk6dGhpcy5fcm91dGVzLnB1c2goe3JvdXRlOmUsaGFuZGxlcjp0LGhvb2tzOm59KSx0aGlzLl9hZGR9LF9nZXRSb290OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLnJvb3Q/dGhpcy5yb290Oih0aGlzLnJvb3Q9Yyh0aGlzLl9jTG9jKCkuc3BsaXQoXCI/XCIpWzBdLHRoaXMuX3JvdXRlcyksdGhpcy5yb290KX0sX2xpc3RlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGhpcy5fdXNlUHVzaFN0YXRlKXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIix0aGlzLl9vbkxvY2F0aW9uQ2hhbmdlKTtlbHNlIGlmKGYoKSl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImhhc2hjaGFuZ2VcIix0aGlzLl9vbkxvY2F0aW9uQ2hhbmdlKTtlbHNle3ZhciB0PXRoaXMuX2NMb2MoKSxuPXZvaWQgMCxvPXZvaWQgMDtvPWZ1bmN0aW9uKCl7bj1lLl9jTG9jKCksdCE9PW4mJih0PW4sZS5yZXNvbHZlKCkpLGUuX2xpc3RlbmluZ0ludGVydmFsPXNldFRpbWVvdXQobywyMDApfSxvKCl9fSxfY0xvYzpmdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdy5fX05BVklHT19XSU5ET1dfTE9DQVRJT05fTU9DS19fP3dpbmRvdy5fX05BVklHT19XSU5ET1dfTE9DQVRJT05fTU9DS19fOnMod2luZG93LmxvY2F0aW9uLmhyZWYpOlwiXCJ9LF9maW5kTGlua3M6ZnVuY3Rpb24oKXtyZXR1cm5bXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1uYXZpZ29dXCIpKX0sX29uTG9jYXRpb25DaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnJlc29sdmUoKX0sX2NhbGxMZWF2ZTpmdW5jdGlvbigpe3RoaXMuX2xhc3RSb3V0ZVJlc29sdmVkJiZ0aGlzLl9sYXN0Um91dGVSZXNvbHZlZC5ob29rcyYmdGhpcy5fbGFzdFJvdXRlUmVzb2x2ZWQuaG9va3MubGVhdmUmJnRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkLmhvb2tzLmxlYXZlKHRoaXMuX2xhc3RSb3V0ZVJlc29sdmVkLnBhcmFtcyl9fSxpLlBBUkFNRVRFUl9SRUdFWFA9LyhbOipdKShcXHcrKS9nLGkuV0lMRENBUkRfUkVHRVhQPS9cXCovZyxpLlJFUExBQ0VfVkFSSUFCTEVfUkVHRVhQPVwiKFteL10rKVwiLGkuUkVQTEFDRV9XSUxEQ0FSRD1cIig/Oi4qKVwiLGkuRk9MTE9XRURfQllfU0xBU0hfUkVHRVhQPVwiKD86LyR8JClcIixpLk1BVENIX1JFR0VYUF9GTEFHUz1cIlwiLHRbXCJkZWZhdWx0XCJdPWksZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfV0pfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uYXZpZ28ubWluLmpzLm1hcCIsIi8vIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4vLyAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuLy8gICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCcuL3N3LmpzJylcbi8vICAgICAgIC50aGVuKHJlZ2lzdGVyID0+IGNvbnNvbGUubG9nKCdTVyByZWdpdHJhZG8hJykpXG4vLyAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IpKTtcbi8vICAgfSk7XG4vLyB9XG5cbmNvbnN0IHJvdXRlciA9IHJlcXVpcmUoJy4vbW9kdWxlcy92YXJpYWJsZXMnKTtcbmNvbnN0IGluaXQgPSByZXF1aXJlKCcuL21vZHVsZXMvaW5pdCcpO1xuY29uc3QgbG9naW5CeUVtYWlsID0gcmVxdWlyZSgnLi9tb2R1bGVzL2xvZ2luQnlFbWFpbCcpO1xuY29uc3QgZ2V0QWxsVHdlZXRzID0gcmVxdWlyZSgnLi9tb2R1bGVzL2dldEFsbFR3ZWV0cycpO1xuXG5yb3V0ZXJcbiAgLm9uKCcvJywgaW5pdClcbiAgLm9uKCcvYWRtaW4nLCBsb2dpbkJ5RW1haWwpXG4gIC5vbignL2FkbWluLXR3ZWV0cycsIGdldEFsbFR3ZWV0cylcbiAgLnJlc29sdmUoKTtcbiIsImZ1bmN0aW9uIGdldEFsbFR3ZWV0cyAoKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5pbm5lckhUTUwgPSAnJztcblxuICBjb25zdCByb290REIgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpO1xuICBjb25zdCB1c2VycyA9IHJvb3REQi5jaGlsZCgndXNlcnMnKTtcblxuICB1c2Vycy5vbmNlKCd2YWx1ZScsIChzbmFwc2hvdCkgPT4ge1xuICAgIGxldCB1c2VySWQ7XG4gICAgbGV0IHVzZXJOYW1lO1xuICAgIGxldCB1c2VySW1hZ2U7XG4gICAgbGV0IGFsbFR3ZWV0cyA9IFtdO1xuICAgIGxldCB0d2VldHNCeVVzZXIgPSB7XG4gICAgICB0d2VldElkOiAnJyxcbiAgICAgIHR3ZWV0RGF0ZTogJycsXG4gICAgICB0d2VldE1lc3NhZ2U6ICcnLFxuICAgICAgdHdlZXRTdGF0ZTogJycsXG4gICAgICB1c2VySWQ6ICcnLFxuICAgICAgdXNlck5hbWU6ICcnLFxuICAgICAgdXNlckltYWdlOiAnJ1xuICAgIH07XG5cbiAgICBzbmFwc2hvdC5mb3JFYWNoKHVzZXIgPT4ge1xuICAgICAgdXNlcklkID0gdXNlci52YWwoKS51aWQ7XG4gICAgICB1c2VyTmFtZSA9IHVzZXIudmFsKCkudXNlcm5hbWU7XG4gICAgICB1c2VySW1hZ2UgPSB1c2VyLnZhbCgpLnBob3RvVVJMO1xuXG4gICAgICB1c2VyLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgaWYgKGtleS5rZXkgPT09ICd0d2VldHMnKSB7XG4gICAgICAgICAga2V5LmZvckVhY2goIHR3ZWV0ID0+IHtcbiAgICAgICAgICAgIHR3ZWV0c0J5VXNlci50d2VldElkID0gdHdlZXQua2V5O1xuICAgICAgICAgICAgdHdlZXRzQnlVc2VyLnR3ZWV0RGF0ZSA9IHR3ZWV0LnZhbCgpLmRhdGU7XG4gICAgICAgICAgICB0d2VldHNCeVVzZXIudHdlZXRNZXNzYWdlID0gdHdlZXQudmFsKCkubWVzc2FnZTtcbiAgICAgICAgICAgIHR3ZWV0c0J5VXNlci50d2VldFN0YXRlID0gdHdlZXQudmFsKCkuc3RhdGU7XG4gICAgICAgICAgICB0d2VldHNCeVVzZXIudXNlcklkID0gdXNlcklkO1xuICAgICAgICAgICAgdHdlZXRzQnlVc2VyLnVzZXJOYW1lID0gdXNlck5hbWU7XG4gICAgICAgICAgICB0d2VldHNCeVVzZXIudXNlckltYWdlID0gdXNlckltYWdlO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codHdlZXRzQnlVc2VyKTtcbiAgICAgICAgICAgIGFsbFR3ZWV0cy51bnNoaWZ0KE9iamVjdC5hc3NpZ24oe30sIHR3ZWV0c0J5VXNlcikpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICAvLyBjb25zb2xlLmxvZyhhbGxUd2VldHMpO1xuICAgIHJlbmRlckFsbFR3ZWV0cyhhbGxUd2VldHMpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQWxsVHdlZXRzICh1c2VyVG9SZW5kZXIpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcblxuICBjb25zb2xlLmxvZyh1c2VyVG9SZW5kZXIpO1xuXG4gIHVzZXJUb1JlbmRlci5mb3JFYWNoKCB0d2VldCA9PiB7XG4gICAgbGV0IHRlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJvd3MtdXNlci10d2VldHMtLXR3ZWV0XCI+JztcbiAgICAgIHRlbXBsYXRlICs9ICc8ZGl2IGNsYXNzPVwib3dzLXVzZXItdHdlZXRzLS1pbWFnZVwiPic7XG4gICAgICAgIHRlbXBsYXRlICs9ICc8aW1nIHNyYz1cIicgKyB0d2VldC51c2VySW1hZ2UgKyAnXCIgY2xhc3M9XCJvd3MtdXNlci10d2VldHMtLWltYWdlXCI+JztcbiAgICAgICAgdGVtcGxhdGUgKz0gJzwvaW1nPic7XG4gICAgICB0ZW1wbGF0ZSArPSAnPC9kaXY+JztcbiAgICAgIHRlbXBsYXRlICs9ICc8ZGl2IGNsYXNzPVwib3dzLXVzZXItdHdlZXRzLS1kZXRhaWxzXCI+JztcbiAgICAgICAgdGVtcGxhdGUgKz0gJzxkaXYgY2xhc3M9XCJvd3MtdXNlci10d2VldHMtLWRhdGUtdXNlclwiPic7XG4gICAgICAgICAgdGVtcGxhdGUgKz0gJzxkaXYgY2xhc3M9XCJvd3MtdXNlci10d2VldHMtLWRhdGVcIj4nICsgbmV3IERhdGUodHdlZXQudHdlZXREYXRlKS50b0xvY2FsZVN0cmluZygpICsgJzwvZGl2Pic7XG4gICAgICAgICAgdGVtcGxhdGUgKz0gJzxkaXYgY2xhc3M9XCJvd3MtdXNlci10d2VldHMtLXVzZXJcIj5AJyArIHR3ZWV0LnVzZXJOYW1lICsgJzwvZGl2Pic7XG4gICAgICAgIHRlbXBsYXRlICs9ICc8L2Rpdj4nO1xuICAgICAgICB0ZW1wbGF0ZSArPSAnPGRpdiBjbGFzcz1cIm93cy11c2VyLXR3ZWV0cy0tbWVzc2FnZVwiPicgKyB0d2VldC50d2VldE1lc3NhZ2UgKyAnPC9kaXY+JztcbiAgICAgICAgdGVtcGxhdGUgKz0gJzx1bCBjbGFzcz1cIm93cy11c2VyLXR3ZWV0cy0tYnV0dG9uc1wiPic7XG4gICAgICAgICAgdGVtcGxhdGUgKz0gJzxsaSBjbGFzcz1cIm93cy1idG4tYWN0aW9uc1wiPjxidXR0b24gaWQ9JysgdHdlZXQudHdlZXRJZCArJyBuYW1lPVwiZWRpdFR3ZWV0XCIgY2xhc3M9XCJidG5cIj5lZGl0YXI8L2J1dHRvbj48L2xpPic7XG4gICAgICAgICAgdGVtcGxhdGUgKz0gJzxsaSBjbGFzcz1cIm93cy1idG4tYWN0aW9uc1wiPjxidXR0b24gaWQ9JysgdHdlZXQudHdlZXRJZCArJyBuYW1lPVwicHVibGlzaFR3ZWV0XCIgY2xhc3M9XCJidG5cIj5wdWJsaWNhcjwvYnV0dG9uPjwvbGk+JztcbiAgICAgICAgICB0ZW1wbGF0ZSArPSAnPGxpIGNsYXNzPVwib3dzLWJ0bi1hY3Rpb25zXCI+PGJ1dHRvbiBpZD0nKyB0d2VldC50d2VldElkICsnIG5hbWU9XCJyZWplY3RUd2VldFwiIGNsYXNzPVwiYnRuXCI+cmVjaGF6YXI8L2J1dHRvbj48L2xpPic7XG4gICAgICAgIHRlbXBsYXRlICs9ICc8L3VsPic7XG4gICAgICB0ZW1wbGF0ZSArPSAnPC9kaXY+JztcbiAgICB0ZW1wbGF0ZSArPSAnPC9kaXY+JztcblxuICAgIC8vIHRlbXBsYXRlICs9ICc8L2Rpdj4nO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCB0ZW1wbGF0ZSk7XG4gIH0pO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PT0gJ0JVVFRPTicgJiYgZXZlbnQudGFyZ2V0Lm5hbWUgPT09ICdlZGl0VHdlZXQnKSB7XG4gICAgICBlZGl0VHdlZXQoZXZlbnQpO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT09ICdCVVRUT04nICYmIGV2ZW50LnRhcmdldC5uYW1lID09PSAncHVibGlzaFR3ZWV0Jykge1xuICAgICAgcHVibGlzaFR3ZWV0KGV2ZW50KTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC50YWdOYW1lID09PSAnQlVUVE9OJyAmJiBldmVudC50YXJnZXQubmFtZSA9PT0gJ3JlamVjdFR3ZWV0Jykge1xuICAgICAgcmVqZWN0VHdlZXQoZXZlbnQpO1xuICAgIH1cblxuICB9LCBmYWxzZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0QWxsVHdlZXRzOyIsImNvbnN0IHJvdXRlciA9IHJlcXVpcmUoJy4vdmFyaWFibGVzJyk7XG5jb25zdCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcblxuY29uc3QgbWFpbiA9ICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gIGZpcmViYXNlLmF1dGgoKVxuICAgIC5nZXRSZWRpcmVjdFJlc3VsdCgpXG4gICAgICAudGhlbiggcmVzdWx0ID0+IHtcblxuICAgICAgICBpZiAocmVzdWx0LnVzZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAocmVzdWx0LmFkZGl0aW9uYWxVc2VySW5mby5pc05ld1VzZXIpe1xuICAgICAgICAgICAgc2F2ZVVzZXIocmVzdWx0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3lhIGVzdMOhIGVuIGxhIGJhc2UgZGUgZGF0b3MnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLmNhdGNoKCBlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgLy8gSGFuZGxlIEVycm9ycyBoZXJlLlxuICAgICAgICBjb25zdCBlcnJvckNvZGUgPSBlcnJvci5jb2RlO1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICAvLyBUaGUgZW1haWwgb2YgdGhlIHVzZXIncyBhY2NvdW50IHVzZWQuXG4gICAgICAgIGNvbnN0IGVtYWlsID0gZXJyb3IuZW1haWw7XG4gICAgICAgIC8vIFRoZSBmaXJlYmFzZS5hdXRoLkF1dGhDcmVkZW50aWFsIHR5cGUgdGhhdCB3YXMgdXNlZC5cbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IGVycm9yLmNyZWRlbnRpYWw7XG4gICAgICAgIC8vIC4uLlxuICAgICAgfSk7XG5cbiAgZmlyZWJhc2UuYXV0aCgpXG4gICAgLm9uQXV0aFN0YXRlQ2hhbmdlZCggdXNlciA9PiB7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBpZiAodXNlci51aWQgPT09ICc4VENTRDlGUG9UaDJScUR3cTk4Y1pRaE11SW4yJykge1xuICAgICAgICAgIHV0aWxzLnRvZ2dsZUhlYWRlcih1c2VyKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB1dGlscy5nZXRNeVR3ZWV0cygpO1xuICAgICAgICB1dGlscy50b2dnbGVIZWFkZXIodXNlcik7XG5cbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPVxuICAgICAgICBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1haW4tY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWFpbi1jb250YWluZXItLXR3ZWV0XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYWluLXRleHRhcmVhXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cInR3ZWV0XCIgbmFtZT1cInR3ZWV0XCIgcGxhY2Vob2xkZXI9XCJ0dSB0d2VldC4uLlwiIGNvbnRlbnRFZGl0YWJsZT1cInRydWVcIj48L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cIm1haW4tY29udGFpbmVyLS10d2VldC1zZW5kLXR3ZWV0XCI+RW52aWFyIHR3ZWV0PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBtYWluLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIHRlbXBsYXRlKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3R3ZWV0JylcbiAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB1dGlscy5saW1pdENoYXJzLCBmYWxzZSk7XG5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4tY29udGFpbmVyLS10d2VldC1zZW5kLXR3ZWV0JylcbiAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1dGlscy5zZW5kVHdlZXQsIGZhbHNlKTtcblxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb3V0ZXIubmF2aWdhdGUoJy8nKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9vdGVyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9XG4gICAgICAgIGBcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1haW4tY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1haW4tY29udGFpbmVyLS1kaXZcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYWluLWNvbnRhaW5lci0tZGl2LS1sb2dvXCI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPVwiLi8uLi9zcmMvaW1nL2ljb25zL2ljb24tNzJ4NzIucG5nXCIgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1haW4tY29udGFpbmVyLS1kaXYtLWJ0bi10d2l0dGVyXCI+TG9naW4gY29uIFR3aXR0ZXI8L2J1dHRvbj5cbiAgICAgICAgICAgIDxwIGlkPVwiYWRtaW4tY2hlY2tib3hcIj48YSBocmVmPVwiLyMhL2FkbWluXCI+wr9FcmVzIGFkbWluPzwvYT48L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIG1haW4uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgdGVtcGxhdGUpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1jb250YWluZXIgYnV0dG9uJylcbiAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1dGlscy5sb2dpbkJ5VHdpdHRlciwgZmFsc2UpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRtaW4tY2hlY2tib3gnKVxuICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHV0aWxzLmdvVG9BZG1pbiwgZmFsc2UpO1xuICAgICAgfVxuICAgIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluaXQ7IiwiY29uc3QgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIGxvZ2luQnlFbWFpbCgpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyICNoZWFkZXItd2VsY29tZScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5pbm5lckhUTUwgPSAnJztcbiAgbGV0IHRlbXBsYXRlID0gJyc7XG4gIHRlbXBsYXRlID1cbiAgYFxuICA8ZGl2IGNsYXNzPVwibWFpbi1jb250YWluZXJcIj5cbiAgICA8ZGl2IGNsYXNzPVwibWFpbi1jb250YWluZXItLWRpdlwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm1haW4tY29udGFpbmVyLS1kaXYtLWxvZ29cIj5cbiAgICAgICAgPGltZyBzcmM9XCIuLy4uL3NyYy9pbWcvaWNvbnMvaWNvbi03Mng3Mi5wbmdcIiAvPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgaWQ9XCJvd3MtbG9naW5cIj5cbiAgICAgICAgPGlucHV0IGlkPVwibG9naW4tZW1haWxcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiY29ycmVvIGVsZWN0csOzbmljb1wiLz5cbiAgICAgICAgPGlucHV0IGlkPVwibG9naW4tcGFzc3dvcmRcIiB0eXBlPVwicGFzc3dvcmRcIiBwbGFjZWhvbGRlcj1cImNvbnRyYXNlw7FhXCIvPlxuICAgICAgICA8YSBocmVmPVwiI1wiIGlkPVwibG9naW4tbG9naW5cIj5FTlRSQVI8L2E+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIGA7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIHRlbXBsYXRlKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLWxvZ2luJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1dGlscy5sb2dpbiwgZmFsc2UpO1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gbG9naW5CeUVtYWlsOyIsImNvbnN0IHJvdXRlciA9IHJlcXVpcmUoJy4vdmFyaWFibGVzJyk7XG5cbmNvbnN0IHJvb3REQiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCk7XG5jb25zdCB1c2VycyA9IHJvb3REQi5jaGlsZCgndXNlcnMnKTtcblxuZnVuY3Rpb24gZ29Ub0FkbWluKGV2ZW50KSB7XG4gIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkge1xuICAgIHJvdXRlci5uYXZpZ2F0ZShgL2FkbWluYCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbG9naW4gKCkge1xuXG4gIGNvbnN0IGVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLWVtYWlsJykudmFsdWU7XG4gIGNvbnN0IHBhc3N3b3JkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLXBhc3N3b3JkJykudmFsdWU7XG5cbiAgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZClcbiAgICAudGhlbihkYXRhID0+IHtcbiAgICAgIHJvdXRlci5uYXZpZ2F0ZShgL2FkbWluLXR3ZWV0cy9gKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGxvZ2luQnlUd2l0dGVyICgpIHtcbiAgY29uc3QgcHJvdmlkZXIgPSBuZXcgZmlyZWJhc2UuYXV0aC5Ud2l0dGVyQXV0aFByb3ZpZGVyKCk7XG5cbiAgZmlyZWJhc2UuYXV0aCgpXG4gICAgLnNpZ25JbldpdGhSZWRpcmVjdChwcm92aWRlcik7XG59XG5cbmZ1bmN0aW9uIGdldE15VHdlZXRzICgpIHtcblxuICB1c2Vycy5vbigndmFsdWUnLCAoc25hcHNob3QpID0+IHtcblxuICAgIHNuYXBzaG90LmZvckVhY2godXNlciA9PiB7XG4gICAgICBsZXQgbXlUd2VldHMgPSBbXTtcbiAgICAgIHVzZXIuZm9yRWFjaChrZXkgPT4ge1xuXG4gICAgICAgIGlmIChrZXkua2V5ID09PSAndHdlZXRzJykge1xuXG4gICAgICAgICAga2V5LmZvckVhY2goIHR3ZWV0ID0+IHtcblxuICAgICAgICAgICAgbXlUd2VldHMudW5zaGlmdChcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGU6IHR3ZWV0LnZhbCgpLmRhdGUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogdHdlZXQudmFsKCkubWVzc2FnZSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogdHdlZXQudmFsKCkuc3RhdGVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJlbmRlck15VHdlZXRzKG15VHdlZXRzKTtcbiAgICAgICAgfVxuXG4gICAgICB9KTtcblxuICAgIH0pO1xuXG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVIZWFkZXIodXNlcikge1xuICBpZiAodXNlci51aWQgIT09ICc4VENTRDlGUG9UaDJScUR3cTk4Y1pRaE11SW4yJykge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciAjaGVhZGVyLXdlbGNvbWUnKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoZWFkZXItdXNlci0tdXNlcm5hbWUnKS50ZXh0Q29udGVudCA9IHVzZXIuZGlzcGxheU5hbWU7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyICNoZWFkZXItd2VsY29tZSAuaGVhZGVyLWF2YXRhciBpbWcnKS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVzZXIucGhvdG9VUkwpO1xuICAgIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItYXZhdGFyJykuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLXVzZXItLWxvZ291dCBidXR0b24nKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbG9nT3V0LCBmYWxzZSk7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyICNoZWFkZXItd2VsY29tZScpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgY29uc3QgYWRvcmFibGVJbWcgPSBgaHR0cHM6Ly9hcGkuYWRvcmFibGUuaW8vYXZhdGFycy80OC8ke3VzZXIuZW1haWx9YFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoZWFkZXItdXNlci0tdXNlcm5hbWUnKS50ZXh0Q29udGVudCA9ICdBRE1JTic7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyICNoZWFkZXItd2VsY29tZSAuaGVhZGVyLWF2YXRhciBpbWcnKS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGFkb3JhYmxlSW1nKTtcbiAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLWF2YXRhcicpLmFwcGVuZENoaWxkKGltZyk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci11c2VyLS1sb2dvdXQgYnV0dG9uJylcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxvZ091dCwgZmFsc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbmRlck15VHdlZXRzIChteVR3ZWV0cykge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lci10d2VldHMnKSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXItdHdlZXRzJykuaW5uZXJIVE1MID0gJyc7XG4gIH1cblxuICBsZXQgdGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cImNvbnRhaW5lci10d2VldHNcIj4nO1xuICB0ZW1wbGF0ZSArPSAnPHVsPic7XG4gICAgbXlUd2VldHMuZm9yRWFjaCh0d2VldCA9PiB7XG4gICAgICB0ZW1wbGF0ZSArPSAnPGxpPic7XG4gICAgICB0ZW1wbGF0ZSArPSAnPHA+JyArIHR3ZWV0Lm1lc3NhZ2UgKyAnPC9wPic7XG4gICAgICAgIHRlbXBsYXRlICs9ICc8ZGl2IGNsYXNzPVwiY29udGFpbmVyLXR3ZWV0cy1kZXRhaWxzXCI+JztcbiAgICAgICAgICB0ZW1wbGF0ZSArPSAnPGRpdiBjbGFzcz1cImNvbnRhaW5lci10d2VldHMtZGV0YWlscy1kYXRlXCI+JyArIG5ldyBEYXRlKHR3ZWV0LmRhdGUpLnRvTG9jYWxlU3RyaW5nKCkgKyAnPC9kaXY+JztcbiAgICAgICAgICB0ZW1wbGF0ZSArPSAnPGRpdiBjbGFzcz1cImNvbnRhaW5lci10d2VldHMtZGV0YWlscy1zdGF0ZVwiPjxzcGFuIGNsYXNzPVwiY29udGFpbmVyLXR3ZWV0cy1kZXRhaWxzLXN0YXRlLVwiPkVzdGFkbzo8L3NwYW4+ICcgKyBpc1R3ZWV0UHVibGlzaGVkKHR3ZWV0LnN0YXRlKSArICc8L2Rpdj4nO1xuICAgICAgICB0ZW1wbGF0ZSArPSAnPC9kaXY+JztcbiAgICAgIHRlbXBsYXRlICs9ICc8L2xpPic7XG4gICAgfSk7XG4gIHRlbXBsYXRlICs9ICc8L3VsPic7XG4gIHRlbXBsYXRlICs9ICc8L2Rpdj4nO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWNvbnRhaW5lcicpLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCB0ZW1wbGF0ZSk7XG5cbn1cblxuZnVuY3Rpb24gaXNUd2VldFB1Ymxpc2hlZCAoc3RhdGUpIHtcbiAgaWYgKHN0YXRlID09PSAnJykge1xuICAgIHJldHVybiAnUGVuZGllbnRlJztcbiAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiAnQXByb2JhZG8nO1xuICB9IGVsc2UgaWYgKHN0YXRlID09PSBmYWxzZSkge1xuICAgIHJldHVybiAnUmVjaGF6YWRvJztcbiAgfVxufVxuXG5mdW5jdGlvbiBsb2dPdXQgKCkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuaW5uZXJIVE1MID0gJyc7XG4gIGZpcmViYXNlLmF1dGgoKS5zaWduT3V0KCk7XG4gIHJvdXRlci5uYXZpZ2F0ZSgnLycpO1xufVxuXG4vKipcbiAgICogaHR0cHM6Ly9jb2RlcGVuLmlvL2d0YjEwNC9wZW4vcHp0Z0hcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKi9cbmZ1bmN0aW9uIGxpbWl0Q2hhcnMgKGV2ZW50KSB7XG4gIC8vIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldC5pbm5lclRleHQubGVuZ3RoKTtcbiAgY29uc3QgdGV4dCA9IGV2ZW50LnRhcmdldC5pbm5lclRleHQ7XG5cbiAgaWYgKGV2ZW50LmtleUNvZGUgIT09IDM3ICYmIGV2ZW50LmtleUNvZGUgIT09IDM4ICYmIGV2ZW50LmtleUNvZGUgIT09IDM5ICYmIGV2ZW50LmtleUNvZGUgIT09IDQwKSB7XG4gICAgaWYgKHRleHQubGVuZ3RoID4gMjc5KSB7XG4gICAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0d2VldCcpO1xuICAgICAgbGV0IHRleHRFeHRyYSA9IHRleHQuc2xpY2UoMCwgMjc5KTtcbiAgICAgIGxldCBuZXdTdHJpbmcgPSBgJHt0ZXh0RXh0cmF9PHNwYW4gY2xhc3M9XCJ0d2VldC1lcnJvclwiPiR7dGV4dC5zbGljZSgyNzkpfTwvc3Bhbj5gO1xuICAgICAgZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9IG5ld1N0cmluZztcblxuICAgICAgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKHRleHRhcmVhKTtcbiAgICAgIHJhbmdlLmNvbGxhcHNlKGZhbHNlKTtcbiAgICAgIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG5cbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZW5kLXR3ZWV0JykuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VuZC10d2VldCcpLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNlbmRUd2VldCAoKSB7XG4gIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3R3ZWV0Jyk7XG5cbiAgdWlkID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZDtcbiAgY29uc3QgdXNlciA9IHVzZXJzLmNoaWxkKHVpZCk7XG4gIGNvbnN0IHR3ZWV0cyA9IHVzZXIuY2hpbGQoJ3R3ZWV0cycpO1xuICBjb25zdCB0d2VldCA9IHR3ZWV0cy5wdXNoKCk7XG5cbiAgdHdlZXQudXBkYXRlKHtcbiAgICBtZXNzYWdlOiB0ZXh0QXJlYS50ZXh0Q29udGVudCxcbiAgICBkYXRlOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICBzdGF0ZTogJycsXG4gIH0pO1xuXG4gIHRleHRBcmVhLnRleHRDb250ZW50ID0gJyc7XG5cbiAgZ2V0TXlUd2VldHMoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdvVG9BZG1pbixcbiAgbG9naW4sXG4gIGxvZ2luQnlUd2l0dGVyLFxuICBnZXRNeVR3ZWV0cyxcbiAgdG9nZ2xlSGVhZGVyLFxuICBsaW1pdENoYXJzLFxuICBzZW5kVHdlZXRcbn0iLCJjb25zdCBOYXZpZ28gPSByZXF1aXJlKCduYXZpZ28nKTtcblxuY29uc3Qgcm9vdCA9IG51bGw7XG5jb25zdCB1c2VIYXNoID0gdHJ1ZTsgLy8gRGVmYXVsdHMgdG86IGZhbHNlXG5jb25zdCBoYXNoID0gJyMhJzsgLy8gRGVmYXVsdHMgdG86ICcjJ1xuXG5jb25zdCByb3V0ZXIgPSBuZXcgTmF2aWdvKHJvb3QsIHVzZUhhc2gsIGhhc2gpO1xubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il19
